
8:02 2012-3-2
company, virtualization, suse, xen, regular meeting: US / China Virtualization Sync, meeting
1, bamvor(prepare for meeting)
continue to fix compile error in libvirt and xen. currently, I have been trying to update the event process flow in libvirt which had been changed after xen4.1 . but I am not familiar with it. so I try to run libvirt and xen in order to understand it.
i am sorry, process not good. because my baby have pneumonia from last Friday. I was go to the hospital.

2, (9:03 2012-3-2)
meeting.

3, chunyan:
1), libvirt migration. 
could she finish patch before leave? she hope. but not sure. it depends on upstream.
2), wireshark, lidongyang task transfer to bamvor.
3), leave. duration. 

4, bamvor
they wish i can focus on xen tools.
Jason and Jim will discuss my work tomorrow. 

5, boyang
1), cambrige?
2), page table.
3), ept.

6, other
community envolment

16:16 2012-03-02
training, kernel crash training
1, 
hi, petr

My answer is in the attachment.
I am new in novell Beijing office. work in virtualization team, focus on xen tools. Before I join in Novell, I have developed Linux driver and Linux kernel porting in Arm-based SOC in recent 4 years. I guess I need learn more x86 architecture knowledge before your training. 
From you test, I seem that I lack in kernel crash debuging experience. So, I am looking forward to your trianing. 

best wishes

Bamvor

>>> Ya Dan Fan 03/02/12 3:16 PM >>>
Hi,

There is no you two's mail addresses in DL-BEJ-RD Team mail list, so I forward it to you guys.

There will be a training session of Kernel Crash Dump training starting at March 12th, the trainer prepared some questions intended to know our kernel skill level ,
please refer to below for the detail information.

If you are interested in this training, please send your answer back to Petr.

Thanks,
Yadan

>>>> On 3/1/2012 at 08:21 PM, in message <201203011321.43694.ptesarik@suse.com>,
> Petr Tesarik <ptesarik@suse.com> wrote:
> > Hi Ya Dan,
> >
> > I'm very sorry for being late with the knowledge test for the Kernel
> > Debugging Training. But better late than never.
> >
> > Please forward this test to everybody who wants to participate in the
> > kernel training and tell them to send their answers back to me until
> > end of Thursday next week (March 8).
> >
> > Note that if you cannot answer some (or even most) of the questions,
> > it is not a reason to quit the training. On the contrary, if somebody
> > is able to answer all those question without any trouble, they should
> > not come, because they won't learn anything new.
> >
> > It is also very important that people send their answers even if they
> > think they are very bad. This is not a school (or university) test that
> > you have to pass. I will use the collected answers to set the level of
> > detail for my training. So, if I don't get the wrong and/or incomplete
> > answers, I will assume that all participants understand the topic, and
> > I will SKIP the explanation.
> >
> > In other words, if you don't know the answer to something and would like
> > to learn it, please don't fill it out but do send it to me. On the other
> > hand, if you know an answer and would get bored to death if you had to
> > listen to my explanation again, please send it to me, so I know I don't
> > have to waste my and your time with it.
> >
> > Petr Tesarik
> > L3 International
> >
>

2, petr reply(today)
Hi Bamvor,

thank you for your swift reply. I don't think you have to learn about the x86
architecture. In fact I believe most people will do no better, so it will be
covered in the training.

Petr

3, (18:07 2012-03-06)
1), time
Ya Dan Fan mail today
Sorry for not mentioning the starting time.
Training would be starting at 10:00am everyday from March 12th to 14th, and it could be finished at around 6:30pm for everyday, but it could be finished sooner than the first 2 days on the last day since the remained topics are less, please arrange your time accordingly.
If you have any concern about the time, just feel free to ask me whatever you would like to know.

Thanks,
Yadan

2), agenda
On 3/5/2012 at 06:48 PM Petr Tesarik <ptesarik@suse.cz> wrote:
Hi Ya Dan,

here's the adjusted agenda for the training:

Day 1
-----
Lesson 1  Intro to the x86(-64) architecture (modes, registers, paging, etc.)
Lesson 2  The x86(-64) ABI (calling conventions, stack layout)
Lesson 3  Memory Management (physical and virtual memory in Linux)
Lesson 4  Basic Linux Kernel Structures (lists, trees, hash tables)
Lesson 5  Synchronization in the Kernel (per-cpu data, locks, RCU, etc.)

Day 2
-----
Lesson 6  Linux Kernel Debugging Techniques (methods, available tools)
Lesson 7  Understanding Oops Messages
Lesson 8  Aligning Source and Disassembly (optimizations, tips and tricks)
Lesson 9  Working with Linux Sources
Lesson 10 Linux Kernel Structures (processes, memory, files, etc.)

Day 3
-----
Lesson 11 The Crash Utility Explained
Lesson 12 Tips and Tricks
Tutorial and Workshop

Please, let everybody know that some parts may get expanded or contracted,
based on the feedback from the kernel test I sent last week.

19:40 2012-03-02
work report - week 09
1, bamvor jian zhang work report
[devel-server] work report - week 09
[GREEN]
1), continue to fix upstream libvirt compile error based on upstream xen-unstable: run libvirt and xen in order to understand how they works.

08:44 2012-03-03
company, network, office, vpn
1, Information Services and Technology mail 20120225
Updated VPN Services Now Available
IS&T recently completed an overhaul of the VPN services. The new services utilize Cisco's technology and products to provide effective, secure remote connections to our corporate network. The services are also optimized to leverage the company's current Intranet design and replace the greatly outmoded Nortel-based services (NOMAD) that have been in service for many years.
The services are available now and employees are encouraged to utilize them immediately for all VPN access. VPN clients are available for Windows, SLED 11, MacOS X, iOS and Android. Installation guides including instructions for locating the respective client software are located on the Innerweb software downloads page https://innerweb.novell.com/resources/helpdesk/software/view.jsp?id=190.
In addition to these new services, IS&T will continue to offer an SSLVPN service based on Novell's Access Manager product at the Provo location. This service is provided to assist in the on-going development and enhancement of our product. The service can be accessed at https://sslvpn.innerweb.novell.com/.
For any issues encountered with VPN services, please contact the IS&T Service Desk via
Compass: https://compassamp.innerweb.novell.com/
E-Mail: servicedesk@novell.com
 
Information Services and Technology
IS&T Service Desk +1 (801) 861-2222

2, installation
1. Open a web browser and navigate to the link that is closest to your location below:
          http://vpn1.americas.novell.com (Provo UT, USA)
          http://vpn2.americas.novell.com (Waltham MA, USA)
          http://vpn1.emea.novell.com (Nuremberg, Germany)
          http://vpn2.emea.novell.com (Telford, United Kingdom)
          http://vpn1.apac.novell.com (Sydney Australia)
          http://vpn2.apac.novell.com (Bangalore India)
2. Once the page is opened you will be prompted for your username and password. This is the same name and
   password you use to login to innerweb with. Click the login button.

08:53 2012-03-03
company, work, my computer
1, network(ifconfig)
linux-bjzhang-2:/home/bamvor # ifconfig
br0       Link encap:Ethernet  HWaddr 84:2B:2B:A4:67:1C
          inet addr:147.2.207.165  Bcast:147.2.207.255  Mask:255.255.255.0
          inet6 addr: fe80::862b:2bff:fea4:671c/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:3212 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1676 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:2038448 (1.9 Mb)  TX bytes:194277 (189.7 Kb)

em1       Link encap:Ethernet  HWaddr 84:2B:2B:A4:67:1C
          inet6 addr: fe80::862b:2bff:fea4:671c/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:9746 errors:0 dropped:25 overruns:0 frame:0
          TX packets:1698 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:2974861 (2.8 Mb)  TX bytes:203173 (198.4 Kb)
          Interrupt:21 Memory:f7be0000-f7c00000

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:16 errors:0 dropped:0 overruns:0 frame:0
          TX packets:16 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:1072 (1.0 Kb)  TX bytes:1072 (1.0 Kb)

2, (15:42 2012-04-10)
network update
1), i3
linux-bhi8:/home/bamvor # ifconfig
eth0      Link encap:Ethernet  HWaddr 84:2B:2B:A4:67:1C  
          inet addr:147.2.207.77  Bcast:147.2.207.255  Mask:255.255.255.0
          inet6 addr: fe80::862b:2bff:fea4:671c/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:2316 errors:0 dropped:46 overruns:0 frame:0
          TX packets:1322 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:685166 (669.1 Kb)  TX bytes:944163 (922.0 Kb)
          Interrupt:21 Memory:f7be0000-f7c00000 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:377 errors:0 dropped:0 overruns:0 frame:0
          TX packets:377 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:420140 (410.2 Kb)  TX bytes:420140 (410.2 Kb)

linux-bhi8:/home/bamvor # 
2), i7
linux-bvirt:/home/bamvor # ifconfig
br0       Link encap:Ethernet  HWaddr D4:BE:D9:A3:31:ED  
          inet addr:147.2.207.72  Bcast:147.2.207.255  Mask:255.255.255.0
          inet6 addr: fe80::d6be:d9ff:fea3:31ed/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:3665349 errors:0 dropped:94 overruns:0 frame:0
          TX packets:3318442 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:5102663501 (4866.2 Mb)  TX bytes:257336225 (245.4 Mb)

em1       Link encap:Ethernet  HWaddr D4:BE:D9:A3:31:ED  
          inet6 addr: fe80::d6be:d9ff:fea3:31ed/64 Scope:Link
          UP BROADCAST RUNNING PROMISC MULTICAST  MTU:1500  Metric:1
          RX packets:3904191 errors:0 dropped:3315 overruns:0 frame:0
          TX packets:3322953 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:5205878208 (4964.7 Mb)  TX bytes:268813116 (256.3 Mb)
          Interrupt:20 Memory:e1500000-e1520000 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:27984 errors:0 dropped:0 overruns:0 frame:0
          TX packets:27984 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:74566671 (71.1 Mb)  TX bytes:74566671 (71.1 Mb)

vif9.0    Link encap:Ethernet  HWaddr FE:FF:FF:FF:FF:FF  
          inet6 addr: fe80::fcff:ffff:feff:ffff/64 Scope:Link
          UP BROADCAST RUNNING PROMISC MULTICAST  MTU:1500  Metric:1
          RX packets:35 errors:0 dropped:0 overruns:0 frame:0
          TX packets:4807 errors:0 dropped:38 overruns:0 carrier:0
          collisions:0 txqueuelen:32 
          RX bytes:2446 (2.3 Kb)  TX bytes:404756 (395.2 Kb)

virbr0    Link encap:Ethernet  HWaddr 26:F9:37:16:E6:B6  
          inet addr:192.168.122.1  Bcast:192.168.122.255  Mask:255.255.255.0
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 b)  TX bytes:0 (0.0 b)

15:02 2012-3-5
GSoC
1, IRC getting started
https://groups.google.com/forum/?fromgroups#!topic/google-summer-of-code-discuss/mcrpCCWz8FI
这里有个人买GSoC student手册，9.95$，买来看看。

13:13 2012-03-06
maillist, work report(week 09); research, file cache
1, work report(week 09)
1), Mark Post(S390?)
I will be presenting several sessions at WAVV, April 13-17.  http://www.wavv.org
(1), WAVV - World Alliance of VSE VM Linux
是IBM 大型机，S390机器的操作系统会议。
2), Charles Arnold(virtualization, kvm)
Allow vm-install to also use atftp instead of just tftp for PV PXE booting
3), Alexander Osthof 
- SLES-for-VMware
--> First Article verfied and approved
--> SLES-11-SP2-for-VMware available on download.novell.com

2, research
1), Jiri Slaby <jslaby@suse.cz>
How to invalidate file caches in memory
(1), On 03/06/2012 11:24 AM, Johannes Meixner wrote:
> I like to verify if an issue depends on whether or not files that
> are read are already cached in memory.
>
> The files of interest are located on the root filesystem so that I
> cannot do "umount ... / mount ..." to invalidate the file caches.
>
> Is there a reliably working method how to invalidate all file
> (read)-caches (of the root filesystem) in memory?
Perhaps:
echo 3 > /proc/sys/vm/drop_caches
(2), Lars Marowsky-Bree <lmb@suse.com>
blockdev --flushbufs

17:25 2012-03-06
时间管理
1, today
1), GSoC.

2, next
1), add task in openSUSE idea list.
1), sles11 sp2 feature介绍。3/15

17:29 2012-03-06
GSoC
1, openSUSE
1), openSUSE GSoC page:
http://en.opensuse.org/openSUSE:GSOC_2012
昨天就是通过这个网页找到admin, 联系Vincent Untz, 请教他一些问题，他说把project加入到idea list就可以。(conversation log: log/novell/im/NM120305_Vincent_Untz__GSoC.txt)
后面几个链接都很有用，有空继续看。
2), idea list
http://en.opensuse.org/openSUSE:GSOC_2012_Ideas
3), mentor HOWTo
http://people.gnome.org/~federico/docs/summer-of-code-mentoring-howto/index.html
4), admins
(1), Matt Barringer
(2), Manu Gupta(manugupt1@gmail.com)
http://sysbytes.wordpress.com
http://sysbytes.wordpress.com/2011/10/25/google-code-in-and-opensuse/
(3), Vincent Untz
5), add to idea list
Upstream Xen Support for Libvirt
The libvirt project provide a common and stable layer for different virtualization technology, including Xen, KVM, qemu and other hypervisors. Xen is one of the most important virtualization technology supported by openSUSE. But there are lots of changes from Xen-unstable, which lead to libvirt unused in lots of occasion. 
The gual of this project is to update libvirt for the xen-unstable. Most of the work may be update for the latest xenlight driver in libvirt. 
Required knowledge: C
Skill level: intermediate
Mentor: Bamvor Jian Zhang
Student: STUDENT NEEDED. 
(2), 没有发布的内容
It supports these hypervisors through an abstraction layer. 
Meanwhile, There are two different management tools provided by Xen, xend and xenlight(The latter one is the lastest one). As a result, two group of tools are introduced by libvirt in order to support xend and xenlight.
(3), 写上去之后有点问题。明天再试一下。
(4), (12:45 2012-03-07)
== Virtualization ==

<!-- 
Problem description short enough to catch attention.
-->
===Upstream Xen Support for Libvirt===

<!-- 
General background information, as much as needed, but not more. 
-->
The libvirt project provide a common and stable layer for different virtualization technology, including Xen, KVM, qemu and other hypervisors. Xen is one of the most important virtualization technology supported by openSUSE. But there are lots of changes from Xen-unstable, which lead to libvirt unused in lots of occasion. 

The gual of this project is to update libvirt for the xen-unstable. Most of the work may be update for the latest xenlight driver in libvirt. 

<!-- 
Mentor name and/or link with contact information 
-->
'''Mentor:''' [[User:Bamvor-Jian-Zhang|Bamvor Jian Zhang]]

'''Required knowledge:''' C

<!-- 
Easy, Medium, Hard
-->
'''Skill Level:''' Intermediate

<!-- 
Student name goes here
-->
'''Student:''' STUDENT NEEDED

6), (15:46 2012-03-08)
'''Mentor:''' [[User:Bamvor-Jian-Zhang|Bamvor Jian Zhang]]
修改为
'''Mentor:''' [[User:Bjzhang|Bamvor Jian Zhang]]
create user info page. 我发现必须是和我novell注册的名字bjzhang一致才可以create这个page. 所以昨天用"User:Bamvor-Jian-Zhang"肯定不行. 
http://en.opensuse.org/User:Bjzhang

I'm Bamvor Jian Zhang. I work at SUSE, about xen tools and libvirt.
[mailto:bjzhang@suse.com contact me]

7), 昨天修改add task时大小写错了, 加入了一个新页面.
我不知道该怎么删除, 请教vincent untz, 他帮忙加了tag. 后来查文档(http://en.opensuse.org/Help:Maintenance): 
Pages and images in the openSUSE wiki can only be deleted by administrators.
    Administrators should refer to this policy when deciding to delete pages or images.
    Non-administrators can ask for page deletions by inserting a {{delete|Reason}} or {{SpeedDelete|Reason}} tag into the page. 
我看源代码, vincent是这样做的: 
{{Delete|created by mistake}}

8), 我又问vincent怎么让更多人知道我这个idea, vincent建议我opensuse blog上发帖子.
Vincent Untz: I think the best way would be to have a blog post appearing on planet openSUSE

18:44 2012-03-06
software, linux, chat, irc, xchat
1, irc official site:
http://www.irc.org/
irc getting started
http://hi.baidu.com/liuhangbin/blog/item/846585420d2ebf1e9213c62f.html
2, xchar
http://xchat.org/
1), download and compile
(1), decompress
xzcat ../download/xchat-2.8.8.tar.xz | tar x
(2), sudo zypper in gtk2-devel
(3), ./configure --enable-textfe, make, sudo make install
3, register nickname
/nickserv register passwd mailbox

20:58 2012-03-06
virtualization, xen, kvm
1, discuss about xen and kvm
http://lists.opensuse.org/opensuse/2010-08/msg00273.html
2, KVM or Xen? Choosing a Virtualization Platform 
https://www.linux.com/component/content/article/153-systems-management-/327628-kvm-or-xen-choosing-a-virtualization-platform
3, KVM for ARM
https://systems.cs.columbia.edu/archive/pub/2010/07/kvm-for-arm/
这里有详细的kvm arm移植分析，也许对我理解kvm有帮助。希望能找到xen arm移植文档。

13:27 2012-03-07
company, openSUSE, openSUSE Meeting Reminder <vuntz@opensuse.org>; time zone, time and date
1, vincent untz
Hello all,

The biweekly project meeting will be held tomorrow at 18:00 UTC
in #opensuse-project on freenode. Everybody is invited to join and
participate!

Find out what time the meeting will be in your timezone:
 http://timeanddate.com/worldclock/fixedtime.html?day=7&month=3&year=2012&hour=18&min=0&sec=0

Agenda of the meeting:
 http://en.opensuse.org/openSUSE:Project_meeting#Agenda_for_the_next_meeting

If you cannot participate and want a specific question to be answered
during the meeting, please add your question to:
 http://en.opensuse.org/openSUSE:Project_meeting#Questions_Section

Minutes and logs of previous meetings can be found at:
 http://community.opensuse.org/meetings/opensuse-project/

Thanks,

2, 后来邮件更正是UTC20:00，也就是北京时间周四凌晨四点。
可以在下面这个地址查到UTC和世界各城市时间对应关系：
http://timeanddate.com/worldclock/fixedtime.html?day=7&month=3&year=2012&hour=20&min=0&sec=0

3, (10:58 2012-03-08)
"Robert Schweikert <rjschwei@suse.com>"mail_20120308_0454
Meeting ended Wed Mar  7 20:53:23 2012 UTC.  The log and minutes are 
available from: (v 0.1.4)
(03:53:23 PM) bugbot: Minutes: 
http://community.opensuse.org/meetings/opensuse-project/2012/opensuse-project.2012-03-07-20.02.html
(03:53:23 PM) bugbot: Minutes (text): 
http://community.opensuse.org/meetings/opensuse-project/2012/opensuse-project.2012-03-07-20.02.txt
(03:53:23 PM) bugbot: Log: 
http://community.opensuse.org/meetings/opensuse-project/2012/opensuse-project.2012-03-07-20.02.log.html

看了看，发现没看太懂，不知道都讨论出什么结果。

13:48 2012-03-07
resource, os, iso, windows8
1, windows8 customer preview
ftp://xen100.virt.lab.novell.com/iso/windows/

13:51 2012-03-07
时间管理
1, today
1), add task in openSUSE idea list.
2), 买电脑。see"13:59 2012-03-07"

13:59 2012-03-07
company, computer, How to buy your PC
1, "GuangLiang Zhao"FW"ChunYan Liu""How to buy your PC"_20120210
1. Choose machine and configurations from Dell website.
( Fail to find the standard PC list. Somewhere on innerweb, but forget where. Usually your PC should be non-standard, so you can just ignore that standard list.)
2. Fill a request via Oracle iProcurement.
https://prod11i.innerweb.novell.com/
-> Logon -> E-Business Home Page -> CN iProcurement.
3. Wait for request been approved. You will get a PO in your email. ( a pdf from purchaser)
4. Contact Dell Deputy and tell her you want to buy a PC. She may ask you to send her the PO.
5. Send her the PO and wait for your PC. 

2, list
https://wiki.innerweb.novell.com/index.php/IT_Standards_-_End_User_Hardware

3, price
在dell官网搜索Optiplex_990, 按配置得到价格：8,584.08。

4, request PO with the help from Wang, Xin. 

5, (15:07 2012-03-08)
昨天申请的jiaju怕有问题, 今天又问zhengyu. 他建议还是联系本地经销商(allen: 0592-8186449). 
需要确认allen公司名称, 做PO时需要, 到时候钱会直接打过去.

Allen_Cao@DELL.com
戴尔(中国)有限公司, 厦门市金尚路2388号, 361011
收货人就是我自己.

6, mail Jiaju zhang
hi, jiaju 

The price of Dell Optiplex 990: 
1, 8G memory: 8650RMB. 
2, 16G memory: 9000RMB. 
Except the memory size, other configration is same as the 
https://wiki.innerweb.novell.com/index.php/IT_St
andards_-_End_User_Hardware.  

Large memory is important for virtualization, So I request the 16G memory 
version of Optiplex 990. 

thanks 

Bamvor 

16:01 2012-03-07
sles11 sp2, feature
1, release
http://www.suse.com/company/press/2012/2/suse-linux-enterprise-11-service-pack-2-released.html
1), kernel update
"Historically, Linux vendors delivered enterprise quality and kernel stability by standardizing on a given kernel release, and back-porting upstream enhancements to that kernel over time. We are starting to see the industry move away from this approach," said Al Gillen, program vice president, System Software, at IDC. "SUSE's approach leverages the growing maturity of the upstream Linux kernel development processes and allows the company to apply its innovation where it makes the best business sense, while maintaining a product that offers the long term application environment stability that enterprise customers demand."
2), New Features Offer Improved Performance, Reliability and Efficiency
SUSE Linux Enterprise 11 SP2 is the first release built using SUSE’s new, forward-looking development model. Notable features include an updated Linux kernel, enhanced filesystem support, and expanded virtualization capabilities:

    3.0 Linux kernel: SP2 includes scheduler and memory management optimizations, support for transparent huge pages and per-CPU network load balancing. These features improve the performance of compute and I/O intensive workloads. SP2 supports the latest Intel* Xeon and AMD* Opteron processors, and exploits new hardware RAS features like CPU and memory offlining.
    Btrfs: SP2 is the first Linux platform to offer commercial btrfs filesystem support. Snapper, a unique tool that's integrated with YaST and Zypper, uses the copy-on-write and snapshot capabilities of btrfs to help administrators audit and roll-back system configuration changes, improving resiliency and services availability.
    Linux Containers: SP2 includes support for Linux Containers - highly efficient and low overhead OS virtualization. Also designed to work well with Xen*, KVM, ESX and Hyper-V*, SP2 offers the most extensive virtualization capabilities of any enterprise Linux distribution.
3), vmdp
SUSE Linux Enterprise Virtual Machine Driver Pack: Paravirtualized drivers for common Windows operating systems that improve communication between hypervisors and guest operating systems by accelerating network and storage I/O. Now with KVM support.
4), virtualization
More Robust Virtualization Capabilities
SP2 enables you to utilize resources more efficiently and migrate workloads to virtual and cloud environments with features such as:
Support for Linux Containers—high efficiency, low overhead OS virtualization
Updated Xen 4.1 and KVM 0.15+ hypervisors
Windows guest OS support in KVM
Improved virtual machine guest OS performance with additional paravirtualized drivers for Xen, KVM, VMware vSphere and MSFT Hyper-V

5), outline
(1),forward-looking development model 
(2), virtualization technology. especially in xen and kvm udpate. 
(3), hyper-V

2, (11:34 2012-03-08)
1), xen update from 4.0 to 4.1
(1), xen 4.0, 4.1 datasheet:
((1)), Credit 2 scheduler
2), KVM
3), virt
4), libvirt

3, kernel and toolchain update
1), sp1
    GCC 4.3.4
    glibc 2.11.1
    Linux kernel 2.6.32
    perl 5.10
    php 5.2.6
    python 2.6.0
    ruby 1.8.7 
2), sp2
    GCC 4.3.4
    glibc 2.11.1
    Linux kernel 3.0.10
    perl 5.10
    php 5.2.6
    python 2.6.0
    ruby 1.8.7 

4, 素材
1), xen
(1), 

5, xen outline
1), xl: 从4.0开始引入，4.1已经几乎xm/xend功能一样.
    A re-architected and improved XL toolstack that is functionally nearly equivalent to XM/XEND.
3), Credit 2 scheduler 
    Prototype credit2 scheduler designed for latency-sensitive workloads and very large systems.
4), CPU Pools 
    CPU Pools for advanced partitioning.
http://old-list-archives.xen.org/archives/html/xen-devel/2009-04/msg00671.html
http://old-list-archives.xen.org/archives/html/xen-devel/2009-01/msg00019.html
5), Large Systems
    Support for large systems (>255 processors and 1GB/2MB super page support).
(1), http://www.cnblogs.com/superymk/archive/2010/07/04/1770799.htm
http://wiki.xen.org/wiki/Xen_4.0_Release_Notes
在Xen3.x时代，对宿主机最大支持CPU数量为64，如图2所示，该图显示了两个可在64颗CPU中前16颗CPU上调度的虚拟机，图中的CPU Affinity（亲核性，指系统运行在哪个CPU上）指明这点.
而在Xen4.0中提供了更强大的可扩展性，Xen4.0支持安装1TB内存以及128颗物理CPU的宿主机，同时对虚拟机也可支持到128个虚拟CPU（VCPU）。
Better performance and scalability: 128 vcpus per guest, 1 TB of RAM per host, up to 1 TB of RAM per HVM guest or 512 GB of RAM per PV guest, 128 physical CPUs per host (as a default, can be compile-time increased to lots more). 
6), AVX
    Support for x86 Advanced Vector eXtension (AVX).
    允许xen guest使用AVX指令, 这些指令可以提升浮点性能. 
7), Memory Access API
    New Memory Access API enabling integration of 3rd party security solutions into Xen virtualized environments.
8), kernel upstream support
9), fix 4.0 bugs
(1), remus
    Remus FT (Fault Tolerance) fixes.
    4.0: http://www.theregister.co.uk/2010/04/13/xen_4_0_hypervisor/
(2), IOMMU
    Many IOMMU fixes (both Intel VT-d IOMMU and AMD IOMMU).
10), Thirdparty
    Thirdparty libs: libvirt driver for libxl has been merged to upstream libvirt.
11), others:
    Optimizations for Linux HVM guest IRQ delivery when running PV-on-HVM drivers.
    Fixes to xenpaging and memory sharing, but they are still considered as 'Tech Previews'.
    Tmem fixes, but still disabled as a default (enable with hypervisor cmdline option).
    Documentation additions (vbd-interface.txt, vbd numbering and naming, xl disk configuration syntax, etc).
    Fixes to properly support jumbo frames (mtu 9000) with vif-bridge script.
    Many toolstack and buildsystem fixes for Linux and NetBSD hosts.
    HVM guest PXE boot enhancements, replacing gPXE with iPXE.
    Interrupt (IRQ) delivery fixes, fixing keyboard/mouse on some laptops.
    Xentrace and xenoprofile fixes for analysing the hypervisor and VMs.
    Userspace qemu-based block device backend driver to use when dom0 kernel does not have kernel based xen-blkback driver available (upstream Linux 3.0 was the first version to include kernel xen-blkback driver, so if using older dom0 kernels you'll benefit from the userspace qemu blockback driver).
    Even better stability through our new automated regression tests. 
12), (10:46 2012-03-09)
http://www.theregister.co.uk/2010/04/13/xen_4_0_hypervisor/
The hot plugging of CPUs and memory in a physical server without having to shut down the hypervisor or its VMs is now supported, which is a much-needed feature. The ability to resize guest virtual disks without having to reboot VMs is also a plus.

11:04 2012-03-08
meeting, Southeast LinuxFest, openSUSE
1, [opensuse-project] We want you!..In North Carolina SELF 2012
Bryen M Yunashko <suserocks@bryen.com>

2, SELF
http://www.southeastlinuxfest.org/
The Southeast LinuxFest is a community event for anyone who wants to learn more about Linux and Free & Open Source software. It is part educational conference, and part social gathering. 

11:17 2012-03-08
时间管理
1, today
1), maillist: xen 2012/3/2--2012/3/7
2), sles11 sp2 feature介绍。3/15

11:50 2012-03-08
article
1, xen
1), Xen 的漫漫人生路
http://fosschef.com/2011/06/xen-the-road-of-the-life/
2), 几种开源虚拟产品的性能比较(2009-10-6)
http://www.vpsee.com/2009/10/testing-the-performance-of-open-source-virtualization-systems/
总的来说，Xen 除了在 dbench 文件系统测试中有点落后外，在其余所有的测试中都表现不俗，尤其是在最后的 scale 测试中表现惊艳。
2, xenapi与libvirt比较
http://hi.baidu.com/mars208/blog/item/7563eea647df1aa3caefd076.html

12:42 2012-03-08
有意识的收集一些open source, virtualization, x86相关网站
1, http://fosschef.com
2, http://www.vpsee.com/
看到几篇和openstack有关的文章.
3, http://solidot.org/

18:12 2012-03-08
software, skill, rpm, 查找某个文件属于哪个包
rpm -qf /usr/sbin/xl

19:56 2012-03-08
license
http://www.opensource.org/licenses/alphabetical

11:12 2012-03-09
时间管理
0, 10:20

1, today
1), about buy computer. see"11:17 2012-03-09". 

11:17 2012-03-09
company, computer, How to buy your PC, cont1
1, 今天jiaju打电话说olaf说9000RMB的可以. 尽快做PO, 并且向buyer(Heather Mastin)说明情况. 担心这个月走不完流程. 
2, (18:29 2012-03-13)
完成. 就等收电脑了. 
PO and quotation: /home/bamvor/work/documents/computer
Heather send PO to Allen and CC to me. 
conversation between Heather and me about comfirm the configuration for my computer: log/novell/im/NM2012313_Heather_Mastin__Confirm_Computer_Configuration_Get_PO.txt
3, (13:56 2012-04-25)
电脑和发票会相机寄来。财务同事(Xin Wang)会要PO, PR(我和jiaju签字)和发票。

17:27 2012-3-10
工作日志是应考虑放到网上，需要支持android，linux和windows。
github似乎在android上使用不方便。

17:52 2012-3-10
sles, sp2, virtualization, xen
1, xen4.1
http://xen.org/products/xen_source.html
A re-architected XL toolstack that is functionally nearly equivalent to XM/XEND
Prototype credit2 scheduler designed for latency-sensitive workloads and very large systems
CPU Pools for advanced partitioning
Support for large systems (>255 processors and 1GB/2MB super page support)
Support for x86 Advanced Vector eXtension (AVX)
New Memory Access API enabling integration of 3rd party security solutions into Xen virtualized environments
Even better stability through our new automated regression tests

2, 素材
1), xen4.1在xen4.0基础上继续完善。

3, credit2
Scheduler development update
George W. Dunlap
Citrix Systems R&D Ltd, UK
george.dunlap@eu.citrix.com
1), problem in credit1
The load balancing algorithm for the credit scheduler doesn’t scale well to this number of cores.
2), credit2 goal
(1), First is fairness: the ability of a VM to get its “fair share” of CPU.
(2), Another goal is to work well for latency-sensitive workloads.
(3), Another aspect to consider is hyperthreads.
(4), Finally, powering down cores or sockets into deeper sleep states can save power for relatively idle systems,
3), other ref
http://wiki.xensource.com/xenwiki/Credit2_Scheduler_Development
这个链接里面有white paper和slide。
http://blog.xen.org/index.php/tag/credit2/
http://xen.1045712.n5.nabble.com/credit2-in-xen-td3423368.html
http://forums.citrix.com/thread.jspa?threadID=287554

4, cpu pools
自“16:01 2012-03-07”
http://old-list-archives.xen.org/archives/html/xen-devel/2009-04/msg00671.html
http://old-list-archives.xen.org/archives/html/xen-devel/2009-01/msg00019.html

http://xen.1045712.n5.nabble.com/Cpu-pools-discussion-td2540556.html

The physical cpus of a server are grouped in cpu-pools. Each physical CPU is assigned at most to one cpu-pool. Domains are each restricted to a single cpu-pool. Scheduling does not cross cpu-pool boundaries, so each cpu-pool has an own scheduler.

5, memory access api
http://blog.xen.org/index.php/2011/03/25/xen-4-1-releases/
Memory Access API: The mem_access API has been added to enable suitably privileged domains to intercept and handle memory faults. This extents Xen’s security features in a new direction and enables third parties to invoke malware detection software or other security solutions on demand from outside the virtual machine.

6, xen vs kvm
http://linux.slashdot.org/story/11/06/03/0328206/linux-30-will-have-full-xen-support

7, kvm update
from 
 kvm-0.12.3-0.11.1.x86_64.rpm
to
 kvm-0.15.1-0.17.3.x86_64.rpm

8, SLES-kvm_en
Currently, SUSE only supports KVM full virtualization on x86_64 hosts. KVM is designed around hardware virtualization features included in AMD (AMD-V) and Intel (VT-x) CPUs.

kvm.rpm是qemu-kvm包。看来kvm的变化得看kernel的变化(Linux kernel 2.6.32 to Linux kernel 3.0.10).

9, kvm kernel update
1), 2.6.33
KVM
Shared msr infrastructure (improves vcpu/idle/vcpu switches by about 2000 cycles in VMX) (commit), (commit)
Enable KVM autoloading to avoid conflict with other VMMs (commit)
Support for PowerPC book3s_64 processors (commit)
SVM: Support Pause Filter in AMD processors (commit)
VMX: Add support for Pause-Loop Exiting (commit)
x86: Add KVM_GET/SET_VCPU_EVENTS ioctls (commit)
2), 2.6.34
(1), Vhost net: fast KVM networking
vhost net is a kernel-level backend for virtio networking. The main motivation for vhost is to reduce virtualization overhead for virtio-net by moving the task of converting virtio descriptors to skbs and back from qemu userspace to the vhost net driver. For virtio-net this means removing up to 4 system calls per packet: vm exit for kick, reentry for kick, iothread wakeup for packet, interrupt injection for packet. This was shown to reduce latency by a factor of 5, and improve bandwidth to almost-native performance. Existing virtio net code is used in guests without modification.

Project web site: http://www.linux-kvm.org/page/VhostNet

(2), Virtualization
Initial HYPER-V emulation (commit), (commit), (commit), (commit)
Bump maximum vcpu count to 64 (commit)
Enable PCI multiple-segments for pass-through device (commit)
PPC: Add support for FPU/Altivec/VSX (commit)
VMX: Enable EPT 1GB page support (commit)
x86 emulator: Add Virtual-8086 mode of emulation (commit)
virtio: Add memory statistics reporting to the balloon driver (V4) (commit), add block topology support (commit)

10:05 2012-3-12
intel 64 and IA 32
1, amd做x86-64时和suse有合作。
2, larger virtual address
最大64bit
48bits currently used sign-extended to 64bits.
3, larger physical address
最大52bits.
amd: 40
intel: 36, 40.
/proc/cpuinfo address size.
4, page attribute
nx 可以保证没法从栈上执行程序，避免被攻击。
5, ud2 for Linux BUG
6, input/output
memory-mapped I/O
port-mapped I/O
7, interrupt and exception
1), exception
faults: page fault.
traps: for debug
aborts: cannot be restarted without loss, hardware error: MCE.
2), software interrupt
3), hardware.interrupt
stack pointer is always safe in 64bit. 因为64bit情况下保存了所有的现场(?). 
IST参考http://www.mjmwired.net/kernel/Documentation/x86/x86_64/kernel-stacks
GuanJun说, Interrupt Stack Table (IST), 没有进入kernel主线, 因为xen, kvm等其它软件都需要修改. GuanJun说使用IST就不支持软中断嵌套了.

12:46 2012-03-12
时间管理
1, today

13:04 2012-3-12
training, kernel crash dump, abi
1, frame pointer stored in ebp register.

14:37 2012-3-12
training, kernel crash dump, kernel data structure
1, hlist for hash.
2, list_del poison the list with special undereferencable value.
00100100
00200200
3, rbtree
从根到最远叶子是根到最近叶子的两倍。
4, 为什么把list_head嵌入到数据结构中，而不是反过来。
list_head分配不会失败。
可以嵌入多个list_head

15:21 2012-3-12 
training, kernel crash dump, memory management
1, huge page 2NB. 这可能就是为什么arm一次用两个page凑成2MB.
2, 64bit下kernel, user space各占128TB.其中8TB for hypervisor. kernel都映射到direct map.
3, DMA32 only in 64 bit, 16MB-4GB.
4, page reclaim
5, x86 page table有一项是标志kernel or user space mapping.

17:07 2012-3-12
training, kernel crash dump, kernel sync
1, ticket spinlock.
implement as queue.
2, mutex: mutual exclusion.

19:19 2012-03-12
work report - week 10, week 11
1, bamvor jian zhang work report
[devel-server] work report - week 10, 11
[GREEN]
1), GSoC project: add libvirt xenlight v2 driver in openSUSE ideas.
http://en.opensuse.org/openSUSE:GSOC_2012_Ideas
thanks to Vincent Untz's help.
2), request a PO for my R&D PC.
3), learn new features of xen and kvm in sles11 sp2. prepare this presentation. 

10:03 2012-3-13
training, kernel crash dump, kernel, debug
x86调试功能强大很多啊。
1, LKCD?, kexec?
2, xendump
3, kernel hang
1), watchdog
2), SysRq + c in sles11
3), trigger by console
4), KDB
4, misbehaviour
kernel-debug
SystemTap script
5, SystemTap

11:30 2012-3-13
Otraining, kernel crash dump, ops
1, device mapper

13:37 2012-3-13
training, kernel crash dump, disassembly
1, jump threading

19:47 2012-03-13
时间管理
1, today
1), sles 11 sp2 features. see"19:48 2012-03-13".

19:48 2012-03-13
company, suse, sles11, sp2, virtualization, features
1, TODO
1), add kvm page.
list the kvm mean features.
kvm virtio performance. 
2), find out xen "new memory access API" meaning.

23:43 2012-3-13
sles11, sp2, xen
1, remus fault tolerance

10:17 2012-03-14
training, kernel crash dump, disassembly, crash utility
1, kmp for high memory. 
So, 64bit do not this. 
2, crash. very powerful utility base on GDB. 
(1), smal environment for crash occur.

16:52 2012-03-14
时间管理
1, today
1), kernel crash dump training. see"10:17 2012-03-04".
2), find out xen "new memory access API" meaning. ask chunyan. 

18:25 2012-03-14
xen, doc, xen的新认识
http://home.lupaworld.com/home-space-uid-434384-do-blog-id-236314.html

10:15 2012-03-15
时间管理
0, 9:10

1, today
1), update sles11 sp2 virtualization slide. 
2), personal. 
3), continue preparing release training. 

14:36 2012-03-15
GSoC, xen
http://wiki.xen.org/wiki/GSoC_2012_Ideas

14:46 2012-03-15
maillist, xen
1, xen
1), what do the maxmem mean? 
[Xen-devel] xl.cfg, memory options clarification
http://lists.xen.org/archives/html/xen-devel/2012-03/msg00683.html
(1),Ian Campbell 
Using maxmem>memory for an HVM guest requires that the balloon driver
(2), Olaf Hering
maxmem= is the amount of memory the guest OS thinks it has, the one it has to configure itself for. Think of it as a virtual memory stick with capacity n GiB.
memory= is the amount of memory the balloon driver in the guest OS is supposed to leave for the guest OS.
gets starts pretty early on in the guest boot up.

15:21 2012-03-15
virtualization, readings
1,Virtual Machine Monitors: Current Technology and Future Trends
http://www.google.com.hk/url?sa=t&rct=j&q=virtual+machine+monitor&source=web&cd=1&ved=0CDoQFjAA&url=http%3A%2F%2Fwww.arion.csd.uwo.ca%2Fcourses%2FCS843a%2Fpapers%2Fintro-vm.pdf&ei=epZhT93lEYzBiQeRibzrBQ&usg=AFQjCNHgwsrp_FRE5H3V33eVnKOEy_PTyw 
local link: "work/documents/virtualization/intro-vm.pdf"
This article give me a brief introduction about virtualization, why and what. 
\todo: continue to read the "VMM IMPLEMENTATION ISSUES". 

16:09 2012-3-15
sles11, sp2
1, exchange: 
Bo yang. 2-3 weeks. 
2, sled
1), banshee
(1), webkit
2), freeRDP
类似r desktop.
3), libreoffice
(1), SVG import into documents
(2), edit SVG, only in draw.
3, sles
1), HA
geocluster: 城域内的cluster. 支持大约30公里内的cluster,  会容忍相对较大的网络延时. 
pecemaker? 集群资源管理
4, kernel
1), btrfs
(1), direct competion as ZFS
(2), big filesystem: 16EB, Exabytes.    GB, TB, PB, EB
(3), alloc make new alloc for file. not change the old file.
(4), snapshot
(5), deframent automatically.
(6), do not support as root filesystem.
2), THP
transparent huge page. 
using huge page while application apply to allocate large memory. 
useful for the software need large memory, like database.
3), LXC
linux container: a lightweight virtualization, like openVZ.
using cgroup(control group) as resouce management.
http://lxc.sourceforge.net/
http://www.ibm.com/developerworks/cn/linux/l-lxc-containers/

17:37 2012-3-15
company, colleague, QA
1, Sun Yan
YSun@suse.com
2, Arthur Guo
aguo@suse.com

13:38 2012-03-16
suse, registration, product key
1, Lin Ma
Visit https://innerweb.novell.com/resources/linux/it/zlmactivation.html to get your own key.
还是不知道怎么注册. 不过kernel debuginfo找到了, 前天没有找到, 不知道是没找对地方还是怎么. 
http://download.suse.de/ibs/SUSE:/SLE-11-SP2:/Update:/Test/standard/x86_64/
2, (17:35 2012-03-19)
registration
1), generate key
select "Generate Key" in "External SLES Activation Key...",  after refresh:
External SLES x86 Activation Key...
96088@BEJ-EXT-SLES-ee236c0ca 
2), registration
run "yast2 inst_suse_register" or select "Novell Customer Center Configuration" in yast. 
3, (11:27 2012-03-20)
1), registeration
(1), fill E-mail address, Activation code, and "System name or description" while registeration.
Joey said that I could maintain the computer actived by this code in "www.suse.com" through "System name or discription". 
(2), notes: if do not fill the activation code during registration. Center will not prompt the input this code again. To fix this, delete "/etc/zypp/credentials.d/NCCcredentials"
linux-bjzhang-2:/etc/zypp/credentials.d # cat NCCcredentials
username=6cc7478f59c44b96a995c68200f13f4d
password=9f2d202f809c4b739c71246dc0db4f55
linux-bjzhang-2:/etc/zypp/credentials.d # rm NCCcredentials
2), "activation is locked" while register. 
Joey Zheng suggest me contact Mervick Ang for help. 
3), (14:42 2012-03-20)
Mervick told me that i can get help from Rui Zhu or servicedesk@novell.com
Rui Zhu is on vacation. write email to service desk:
(1), email
Hi, 

hi, this is bamvor jian zhang from server team in beijing office. 
i got "activation is locked" while I register sles11 sp2. 
what should i do?  thanks. 

the activation key i used: 
External SLES x86 Activation Key...
96088@BEJ-EXT-SLES-ee236c0ca 

best wishes 
bamvor

4, (14:07 2012-04-01)
(1), reply from "Service Desk"
I have unlocked and extended the assignment this license is tied to until 27 March of 2013.  You should be able to register now.
I will close this incident, but please feel free to re-open it if your problem is not solved.
(2), I will encouter another error. maybe because of the network. I arm going to register it later. 

5, (14:25 2012-04-09)
retry
1), register successful using novell wifi in my vm. but fail in my physical machine. Maybe because network is not stable while my physical machine regisration. 
Retry failed: need password. this password is not my suse account username and password. 
2), copy NCCcredentials from vm to physical machine. 
linux-bvirt:/etc/zypp/credentials.d # cat NCCcredentials 
username=425d46229ae14b1bb9396f44f1990b43
password=e5d689c3f0d84375a206b14433a28e8c

16:14 2012-03-16
时间管理
1, today
1), how to register sles. Lin Ma will give me the product key when he have time.
see"13:38 2012-03-16"
2), summarize kernel crash dump training. especially in crash tools and ABI. see"16:16 2012-03-16"

16:16 2012-03-16
training, kernel crash dump, summerize and excise
1, try crash with my own kernel debuginfo

16:23 2012-03-16
company, maillist, research, discuss, Internal video streaming site 
1, Plumi and plone
Sascha Peilicke <speilicke@suse.com>
> Plumi could do the job, but needs plone, which I never wanted to touch
> again (Its probably just me, sorry).
I'd be willing to help here, I've got some Plone experience (back at the
university, I had a job as "Hilfswissenschaftler" to work on some
e-Learning components for Plone).

2, Dominik Heidler <dheidler@suse.de>
Very minimal, but also cool: http://videobin.org/code

11:29 2012-03-19
virtualization, xen, libvirt, mouse, mouse for windows, xen虚拟windows使用vnc桌面鼠标位置偏移现象的解决 
1, ref
1), xen
http://blog.csdn.net/jcwkyl/article/details/6079385
#-----------------------------------------------------------------------------
#   Enable USB support (specific devices specified at runtime through the
#                       monitor window)
usb=1

#   Enable USB mouse support (only enable one of the following, `mouse' for
#                             PS/2 protocol relative mouse, `tablet' for
#                             absolute mouse)
#usbdevice='mouse'
usbdevice='tablet'
2), libvirt XML
http://www.libvirt.org/formatdomain.html#elementsUSB
  <devices>
    <input type='tablet' bus='usb'/>
  </devices>
The input element has one mandatory attribute, the type whose value can be either 'mouse' or 'tablet'. The latter provides absolute cursor movement, while the former uses relative movement. The optional bus attribute can be used to refine the exact device type. It takes values "xen" (paravirtualized), "ps2" and "usb".

14:57 2012-03-19
computer, suse, sles11, sp2, install
1, bios里面明明设置了NIC启动, 但是F12里面的启动菜单没有. 后来发现是NIC选项里面没有选择NIC with PXE, 选择后F12的菜单里面就有"boot from NIC"了. 
2, display adapter
sles11 sp2 do not know this display adapter, try to fix it. 
1), check display adapter
(1), lspci -nn (run as root)
linux-bvirt:/home/bamvor # lspci -nn
00:00.0 Host bridge [0600]: Intel Corporation 2nd Generation Core Processor Family DRAM Controller [8086:0100] (rev 09)
00:01.0 PCI bridge [0604]: Intel Corporation Xeon E3-1200/2nd Generation Core Processor Family PCI Express Root Port [8086:0101] (rev 09)
00:16.0 Communication controller [0780]: Intel Corporation 6 Series/C200 Series Chipset Family MEI Controller #1 [8086:1c3a] (rev 04)
00:16.3 Serial controller [0700]: Intel Corporation 6 Series/C200 Series Chipset Family KT Controller [8086:1c3d] (rev 04)
00:19.0 Ethernet controller [0200]: Intel Corporation 82579LM Gigabit Network Connection [8086:1502] (rev 04)
00:1a.0 USB controller [0c03]: Intel Corporation 6 Series/C200 Series Chipset Family USB Enhanced Host Controller #2 [8086:1c2d] (rev 04)
00:1b.0 Audio device [0403]: Intel Corporation 6 Series/C200 Series Chipset Family High Definition Audio Controller [8086:1c20] (rev 04)
00:1c.0 PCI bridge [0604]: Intel Corporation 6 Series/C200 Series Chipset Family PCI Express Root Port 1 [8086:1c10] (rev b4)
00:1c.2 PCI bridge [0604]: Intel Corporation 6 Series/C200 Series Chipset Family PCI Express Root Port 3 [8086:1c14] (rev b4)
00:1d.0 USB controller [0c03]: Intel Corporation 6 Series/C200 Series Chipset Family USB Enhanced Host Controller #1 [8086:1c26] (rev 04)
00:1e.0 PCI bridge [0604]: Intel Corporation 82801 PCI Bridge [8086:244e] (rev a4)
00:1f.0 ISA bridge [0601]: Intel Corporation Q67 Express Chipset Family LPC Controller [8086:1c4e] (rev 04)
00:1f.2 RAID bus controller [0104]: Intel Corporation 82801 SATA Controller [RAID mode] [8086:2822] (rev 04)
00:1f.3 SMBus [0c05]: Intel Corporation 6 Series/C200 Series Chipset Family SMBus Controller [8086:1c22] (rev 04)
01:00.0 VGA compatible controller [0300]: ATI Technologies Inc Cedar PRO [Radeon HD 5450] [1002:68f9]
(2), 68f9 is the vendor id in pci id. 
search it in google "pci id vendor id 68f9":
http://www.google.com.hk/#hl=zh-CN&newwindow=1&safe=strict&site=&source=hp&q=pci+id+vendor+id+68f9&oq=pci+id+vendor+id+68f9&aq=f&aqi=&aql=&gs_sm=3&gs_upl=228l12061l0l12852l21l21l0l0l0l0l473l2538l3.8.0.2.1l14l0&gs_l=hp.3...228l12061l0l12852l21l21l0l0l0l0l473l2538l3j8j0j2j1l14l0.frgbld.&bav=on.2,or.r_gc.r_pw.,cf.osb&fp=c1048bbb7a358ed2&biw=940&bih=927
Zheng,Yu find it in:
http://developer.amd.com/download/pc_vendor_id/pages/default.aspx
AMD Radeon HD 6350 ManhattanC 68F9 
(3), it looks like the pci id is not right, so update pciid through update-pciids commands. 
after update it is same. ignoring it. 

2), update sles for lastest ATI driver. 
(1), register novell customer center failed. try add repo
((1)), add repo and set auto refresh
bamvor@linux-bvirt:~> sudo zypper addrepo http://download.suse.de/ibs/11-SP2:/Update:/Test/standard Update
bamvor@linux-bvirt:~> sudo zypper modifyrepo -r Update
bamvor@linux-bvirt:~> zypper repos
# | Alias                                            | Name                                   | Enabled | Refresh
--+--------------------------------------------------+----------------------------------------+---------+--------
1 | SUSE-Linux-Enterprise-Server-11-SP2 11.2.2-1.234 | SUSE-Linux-Entever-11-SP2 11.2.2-1.234 | Yes     | Yes
2 | Update                                           | Update                                 | Yes     | Yes
((2)), sudo zypper refresh

16:30 2012-03-19
work report - week 11
1, bamvor jian zhang work report
[devel-server] work report - week 11
[green]
1), kernel crash dump training. 3days
2), attend sle11 sp2 release party, and share new features of xen and kvm. 

17:21 2012-03-19
linux, suse, remote desktop, ssh, X11, remote display; vncviewer
1, xterm and ssh
xterm -e ssh 147.2.207.165
but can not open display while using gvim. reference some doc. 
bamvor@linux-bvirt:~> ssh -X 147.2.207.165
Password:
Last login: Mon Mar 19 18:12:47 2012 from 147.2.207.72
/usr/bin/xauth:  creating new authority file /home/bamvor/.Xauthority

第一次用"-X"会提示建立信的authority file. 

"-X" means enable X11 forward which give ssh the ability for remote display. 

man ssh
-X   Enables X11 forwarding.  This can also be specified on a per-host
     basis in a configuration file.
     X11 forwarding should be enabled with caution.  Users with the
     ability to bypass file permissions on the remote host (for the
     user's X authorization database) can access the local X11 display
     through the forwarded connection.  An attacker may then be able
     to perform activities such as keystroke monitoring.
     For this reason, X11 forwarding is subjected to X11 SECURITY
     extension restrictions by default.  Please refer to the ssh -Y
     option and the ForwardX11Trusted directive in ssh_config(5) for
     more information.

2, (15:05 2012-03-22)
remote control through vncviewer
1), setting
(1), allow remote administration in yast "Remote Administration(VNC)"
(2), setting in "control center" "Remote Desktop" setting. 
((1)), allow other users to view and control your desktop
((2)), Security
disable: You must confirm each access to this machine. 
enable: require the user to enter this passwd. 
NOTES: restart may be needed after changing these settings. 
(3), generate vncpasswd according to the "Remote Desktop" setting. 
bamvor@linux-bvirt:~> vncpasswd
Using password file /home/bamvor/.vnc/passwd
VNC directory /home/bamvor/.vnc does not exist, creating.
Password:
Verify:
Would you like to enter a view-only password (y/n)? n
NOTES: if i not generate this passwd file, i need enter passwd each time while connect. 
2), now, i can remote connect with this passwd file. 
bamvor@linux-bvirt:~> vncviewer linux-bjzhang-2 -passwd ~/.vnc/passwd  &
[5] 16740
bamvor@linux-bvirt:~> Connected to RFB server, using protocol version 3.7
Performing standard VNC authentication
Authentication successful
Desktop name "bamvor@linux-bjzhang-2"
VNC server default format:
  32 bits per pixel.
  Least significant byte first in each pixel.
  True colour: max red 255 green 255 blue 255, shift red 16 green 8 blue 0
Using default colormap which is TrueColor.  Pixel format:
  32 bits per pixel.
  Least significant byte first in each pixel.
  True colour: max red 255 green 255 blue 255, shift red 16 green 8 blue 0

3, (16:43 2012-03-23)
direct boot groupwise mail and message instead of using vncviewer
1), groupwise mail
groupwise 
2), groupwise message
application-browser &
select "novell message" in application browser. 

19:05 2012-03-19
时间管理
1, today
1), sles11 sp2 install and update. 
2), reply GSoC mail. 

20:03 2012-03-19
maillist, work report: libvirt libxl migration
1, work report
1), Chunyan Liu
- check libvirt libxl migration issue:
issuing another virsh command while doing live migration, save domain will fail.
while issuing virsh command like "version version", xc_shadow_control failed to get dirty bitmap, errno -efault. still don't know why.
2), Jim Fehlig <jfehlig@suse.com>
关注Jim的几个bug. Jim在做openstack的事情. 
[green]

Bugs:
bnc#749016 - Creation of VM probelm/ reboot after OS installation fails

bnc#720752 - L3: Unable to create Xen VM due to Error: Device 0 (vif)
             could not be connected. Hotplug scripts not working.

bnc#749147 - SLES11 SP2 GMC3 - virt-manager fails to connect to remote
             Xen server

rhb#241289 - vhostmd doesn't set supplemental groups correctly

Upstream libvirt:
Review, test, and comment on Chunyan's libxl migration patch.  Not sure if
it will make 0.9.11.  There are a few non-trivial issues that need resolved
before committing upstream.

Factory:
Packaged/tested sanlock 2.1.  Blogged about libvirt+sanlock protection
for VM disk images.

Misc:
Booked travel for openstack summit.
SP2 release party - good times :).

Continued poking at openstack.  After much frustration, finally able to
import images into glance, create volumes through EC2 API, and launch some
instances using packages based on latest upstream code.  Just starting to
scratch the surface of this large project...

Regular calls/meetings:
Maintenance, Virtualization staff

20:33 2012-03-19
GSoC, student, xen, libvirt, Upstream Xen Support for Libvirt [ Gsoc 2012]
1, student: Sanidhya Kashyap <sanidhya.iiith@gmail.com>
Hello Sir,

I am interested in working for openSUSe and I am quite interested in the topic - Upstream Xen Support for Libvirt, proposed by you. Actually I am a kvm developer but I have worked on Xen a while ago and I would like to learn more things about Xen. It would be good if you give me some pointers about this.

Thanks,
Sanidhya

2, reply
hi, Sanidhya

Glad to meet you. It is great for this project you know about xen and virtualization. 
Xenlight(XL) is a new tool stack for xen. It still under development in xen-unstable. Meanwhile it is a main tool stack for xen in future. 
1, Maybe you could read doc and mail about xenlight from xen-devel maillist and xen.org. 
2, And prepare a environment for libvirt developemnt. 
3, post opensuse-project maillist

PS: It looks like we are not in the same time zone(CST for me). 
You can reach me through this email or IRC(bamvor) during UTC 2:00 to UTC 11:00

best wishes.

Bamvor

3, (11:12 2012-03-20)
reply the same email again. 

ok. you can subcribe libvir-list either. 
Which part of kvm you develop, tools or kernel drivers? 
Could you give a brief introduction for yourself, backgroud, development experience, and so on.

10:38 2012-03-20
suse, virtualization, xen, libvirt, migration, live migration problem; Chunyan Liu
1, migration problem
1), from im:
Chun Yan Liu: I'm checking a strange migration issue of my libvirt libxl patch, but have no idea yet. Perhaps need your help to do something after I leave.
Bamvor Jian Zhang: yes. i saw it from your week report. 
Bamvor Jian Zhang: issuing another virsh command while doing live migration, save domain will fail.
while issuing virsh command like "version version", xc_shadow_control failed to get dirty bitmap, errno -efault. still don't know why.
Bamvor Jian Zhang: is it? 
Chun Yan Liu: yes. That's the problem.
Chun Yan Liu: non-live migration has no problem.
Bamvor Jian Zhang: maybe i can begin with reading your code. 
Chun Yan Liu: And xend tools also calls xc_shadow_control to get dirty bitmap, but it won't fail when we issue "virsh version"
Chun Yan Liu: I can send my patch to you. (both for upstream and for SP2)
Bamvor Jian Zhang: ok. 
Chun Yan Liu: And for SP2, I have built rpms on ibs, you can update libvirt packages and do tests.
Bamvor Jian Zhang: ok.
Bamvor Jian Zhang: i had planed to read some old bug you sent to me. but it seems that learn your migration patch is a better choice. 
Chun Yan Liu: I've sent you an email, including the patch and rpms location.
Bamvor Jian Zhang: yes. i got it. 
Chun Yan Liu: I've done some debugging, when issuing "virsh version", it will open a connect to the hypervisor, calls do_open, ->, libxlOpen, then xc_shadow_control failed. But I could find yet how those two affacted by each other.
Chun Yan Liu: test syntax: virsh migrate --live domU xen+ssh://destIP/ destIP
Bamvor Jian Zhang: ok. I do not fimiliar with migration. i will learn. 
Chun Yan Liu: that's OK. Just play with it and get familiar first. 

2), patch 
for upstream: test.patch
for SP2: xl_migrate.patch
SP2 new built rpms are available at:
http://download.suse.de/ibs/home:/cyliu:/branches:/Devel:/Virt:/SLE-11-SP2/SLE_11_SP2_GA/
you can add this uri to yast, then install libvirt, libvirt-client,
libvirt-python and libvirt-debuginfo, libvirt-debugsource to do testing and
debugging.

bamvor: work/source/virtualization/xen/patch

10:45 2012-03-20
时间管理
1, today
1), 10:10-10:50 Chunyan Liu suggest me follow her migration problem. see"10:38 2012-03-20".
2), GSoC student. see"20:33 2012-03-19"3. 
3), summaries:
(1), for work. no technique work. environment build up and get to know Chunyan's status of migration. 
(2), GSoC. Sanidhya is a good candidate for my project. I need to keep in touch with him. I wonder that his background and experience of virtualization is better than me.

17:15 2012-03-20
suse, registration; PC, information, host name, user name
1, bamvor RD pc
1), bamvor_RD_dom0
hostname: linux-bvirt
sles11 sp2 xen host
register: bamvor RD xen host
2), bamvor_RD_domU_1
sles11 sp2 pv
User's Full Name: bamvor xen domU_1
host name: linux-brd-1
ip address: 147.2.207.67
3), bamvor_RD_domU_1
clone from "2)"
sles11 sp2 pv
User's Full Name: bamvor xen domU_1
host name: linux-brd-1
ip address: 147.2.207.115

17:20 2012-03-20
suse, linux, yast, installation, autoyast
/root/autoinst.xml

17:51 2012-03-20
maillist, research
1, research
1), btrfs
[Research] Alarmist(?) opinion piece on Oracle & SUSE supporting btrfs
http://www.h-online.com/open/features/Kernel-Comment-Btrfs-too-fast-1473538.html
(1), quote by "Tim Serong <tserong@suse.com>"
"Oracle and SUSE already support Btrfs, even though the filesystem
hasn't yet been proven in a proper field test and is officially still
classified as experimental. The two distributors have also pressed ahead
with the Btrfsck test and repair tool, foregoing any prior testing by
the Linux community."

...

"Speaking of corrupted filesystems: Btrfs has at least been field tested
here and there – which can't be said for the improved test and repair
tool for Btrfs drives that everyone has been anticipating for so many
months. The "improved" Btrfsck you now provide hasn't even become
available on its own yet. Your code appears to be based on code that can
be found in a Git branch of the Btrfs tools' source code – a branch that
carries the alarming name "dangerdonteveruse"."

We have a more positive opinion than this, right? ;)
(2), read this article
this article also introduce that btrfs is less performance than ext4 for vm disk. 
it's well known that Btrfs is not very suitable for storing the disk images of virtual machines. In many cases, it also proves less effective than Ext4 or XFS for database storage. This is due to the use of Copy-on-Write (CoW), a mechanism that makes many of the benifits to Btrfs possible in the first place. The developers have been discussing tricks to avoid some of the inherent disadvantages of COW or at least minimise their effects – perhaps you should have waited for those. 
reference link was gave by this article: 
http://lists.fedoraproject.org/pipermail/devel/2012-March/163823.html
For example if you mostly compile kernels, btrfs is fastest.  However if you mostly use a fs for your virt images, don't use btrfs! 

19:56 2012-03-20
GSoC, student, xen, libvirt, Upstream Xen Support for Libvirt [ Gsoc 2012]
1, college
India's top 20 engineering colleges 
June 28, 2005
http://www.rediff.com/money/2005/jun/28spec.htm
14 International Institute of Information Technology, Hyderabad 60.2

2, mail
Hello sir,
I am already subscribed to the libvirt-list since long time.
I am a dual degree student, and I am working on the live migration of the
VMs using KVM. So, for that I have already gone through the kvm module as a
whole and qemu too. Right now, I will be working on the memory management
done by the KVM i.e. about the DIRTY_LOG API.
I have already implemented a char driver which I am going to integrate in
qemu to support post-copy live migration. This has been done by the AIST
people, but its inefficient and there was no research involved, it was just
the porting of the xen model to the kvm and which I find is incomplete.
I have attached the resume, you can have a look at it.
Regards,
Sanidhya

3, reply
hi, Sanidhya

thanks for your email and resume. I am sorry I'am busy today. 
From your email and resume, I saw your good virtualization backgroud. Maybe you can post your self-introduction to opensuse-project list. and let more people know you, it is important for you while opensuse rate and score the GSoC student. 

Besides, I'am glad to see that you try build up the environment of xen and libvirt. this is a good beginning. 
do you search the errror message you got before send this email "[opensuse-project] Xen kernel not booting openSUSE 12.1"? There are similiar question in opensuse maillist or forum. 
opensuse-project is a "Project and Community related discussions" from http://lists.opensuse.org/, maybe you should send your email to opensuse or other relative maillist. 

best wishes
bamvor

4, mail about xen boot fail
1), mail
Hi,

I installed the xen kernel for the virtualization support. But the xen
kernel does not boots up. It hangs for sometime at the time of booting
and then the system restarts. 

the configuration of menu.lst is as follows

title Xen -- openSUSE 12.1 - 3.1.9-1.4
    root (hd0,5)
    kernel /boot/xen.gz vga=mode-normal 
    module /boot/vmlinuz-3.1.9-1.4-xen
root=/dev/disk/by-id/ata-WDC_WD5000BEVT-00A0RT0_WD-WXD1AB0L7670-part6
ip=dhcp --
resume=/dev/disk/by-id/ata-WDC_WD5000BEVT-00A0RT0_WD-WXD1AB0L7670-part9
splash=silent quiet showopts vga=normal 
    module /boot/initrd-3.1.9-1.4-xen

I also tried using nomodeset option. But, that did not work. 

So, any help would be apprecited.

Thanks,
Sanidhya

11:24 2012-03-21
时间管理
0, 11:20
my daughter woke up 5 times last night. 

1, today
1), 11:41-12:54 Jim discuss with me. see"11:57 2012-03-21".
含吃饭30‘ 
2), check email, read news. 

1:57 2012-03-21
company, suse, virtualization, migration, libvirt, xen, xenlight(xl); Jim discuss with me about libvirt libxl driver
log/novell/im/NM20120321_Jim_Fehlig__Libvirt_libxl_driver__my_work.txt
1, Daniel P. Berrange and Eric Blake from redhat are the primary maintainers of libvirt. 
2, compare qemu, libxl, xm/xend driver in libvirt. got a TODO list of libxl driver. there are a lots of work in it. 
3, continue to finish migration patch. upstream give some suggestion to Chunyan.fix migration bug. 
4, question: prioirity. 
finish migration at first? 
5, (13:31 2012-03-21)
talk with Jiaju
1), Jiaju have a look at Chunyan's patch and discuss in libivir-list. He highlight what I need to do:
(1), multi-thread lock. ref qemu doc
(2), port number
By Jim: 
You can use a virBitmap to keep track of used ports.  The qemu driver uses a virBitmap to keep track of used vnc ports, e.g. see qemuProcessNextFreePort() in src/qemu/qemu_process.c.
(3), using libvirt wrapper function instead of using other library directly.
6, Chunyan new patch after discuss 9th May.
https://www.redhat.com/archives/libvir-list/2012-March/msg00380.html
(1), reply from Jim
While testing this patch, I noticed some strange problems wrt concurrent
operations in the driver.  E.g. if I start a migration and then query
dominfo on the migrating domain, it kills the migration
xen134: # virsh migrate --live sles11sp1-pv xen+ssh://xen142
error: internal error Failed to save domain '7' with libxenlight
Also, when a migration fails (e.g. destination cannot access the
domain's disk image) the domain appears to be left in a hung state on
the source.  It is as if the domain is paused, but event the xen tools
claim it is running.
Can you take a look at these issues?
(2), reply from Chunyan
((1)), port
> I think you should reserve the port in libxlFindFreeMigPort(), similar
> to libxlNextFreeVncPort().  In fact, you could probably generalize
> libxlNextFreeVncPort(), e.g. libxlNextFreePort(virBitmapPtr bitmap, int
> start_port, int stop_port) and use it to find available VNC and
> migration ports.
There is some difference to handle Migration ports and VNC ports:
VNC port always find a free port from VNC ports range and use it, but migration port could be pointed by user or if not pointed find a free port to use it. There are two places need to set bitmap maybe:
1. The port pointed by user could be a port in default migration ports range, we should set bitmap so that next time finding free port could avoid that port.
2. No port pointed by user, then find a free migration port from default migration ports range, and set bitmap.
Besides, with port pointed, we need to create socket and bind to the port too. libxlFindFreeVNCPort creates socket and binds port and set bitmap in the function, if FindFreeMigPort also does that, then to user pointed port, we need to do same work again.

Seems not cleaner than: FindFreeMigPort only gets the free port, then we can get a port either from FindFreeMigPort or user pointed, then create socket and bind to that port, if that port is in default migration ports range, set bitmap.).

How do you think?
((2)), migration bug
>While testing this patch, I noticed some strange problems wrt concurrent
>operations in the driver.  E.g. if I start a migration and then query
>dominfo on the migrating domain, it kills the migration
>
>xen134: # virsh migrate --live sles11sp1-pv xen+ssh://xen142
>error: internal error Failed to save domain '7' with libxenlight

Strange. Found that doing whatever operation that needs to open a connect to the hypervisor (even "virsh version") will cause the same issue to live migration. While trying operation that calls do_open the connect, xc_shadow_control( in xc_domain_save) will fail.
Non-live migration is OK.
>Also, when a migration fails (e.g. destination cannot access the
>domain's disk image) the domain appears to be left in a hung state on
>the source.  It is as if the domain is paused, but event the xen tools
>claim it is running.
Yes. For HVM, libxl_domain_resume will fail. For PV, libxl_domain_resume should be OK.
### libxl_domain_resume Called domain_resume on non-cooperative hvm domain xxx
The state in xl shows "ss", the state should be updated in libvirt, will check that.
But there is a problem, it seems there is no corresponding virsh command that can handle such a state. It's not a "PAUSE" state as "virsh suspend xxx" which one can issue "virsh resume xxx" to unpause it.

14:25 2012-03-21
work, company, passwd, password
groupwise: 7552087620asd
innerweb: 7552087620
(11:28 2012-03-22)
groupwise: asdf
(14:29 2012-03-22)
suse
password: totally 10 chars. 
	(4digits: the staff number in my first company)  
+	I75Asd
PIN: 1234
secret question: (my initial password for suse)
(11:24 2012-05-21)
change passwd. 
password: totally 10 chars. 
	(4digits: the staff number in my first company)  
+	I75Qwe
(11:25 2012-07-20)
change passwd. 
password: totally 10 chars. 
	(4digits: the staff number in my first company)  
+	I75Zxc
(12:57 2012-09-18)
change passwd. 
password: totally 10 chars. 
	(4digits: the staff number in my first company)  
+	I75Asd

16:25 2012-03-21
software, skills, linux, shortcut, move window
1, Arrow: normal move with alignment. 
2, Shift + Arrow: quick move with alignment.
3, Ctrl + Arrow: precise move without alignment. 

16:29 2012-03-21
company, suse, virtualization, migration, libvirt, xen, xenlight(xl)
1, learn migration in libvirt
http://libvirt.org/migration.html

18:08 2012-03-21
linaro, virtualization, kvm, qemu, arm
1, linaro qemu
1), Blueprints for Linaro QEMU
https://blueprints.launchpad.net/qemu-linaro
可以看到linaro qemu开始做kvm的支持包括qemu kvm和virtio driver.
2), kvm
Initial KVM Validation integration 
https://blueprints.launchpad.net/qemu-linaro/+spec/initial-kvm-validation-integration
3), Add virtio-mmio support 
https://blueprints.launchpad.net/qemu-linaro/+spec/add-amba-virtio-support

11:28 2012-03-22
GSoC, student, Upstream Xen Support for Libvirt [ Gsoc 2012]; suse, virtualization, xen, libvirt; issue: xen boot debug, serial
1, [opensuse-virtual] Xen kernel not booting openSUSE 12.1
Sanidhya Kashyap
2, Jim reply
You can use the 'noreboot' option on xen cmd line to prevent
restarting.  It is useful for debugging these sorts of problems.
Sanidhya, fyi, one method of getting some helpful info
http://old-en.opensuse.org/How_to_Capture_Xen_Hypervisor_and_Kernel_Messages_using_a_Serial_Cable

11:33 2012-03-22
GSoC, student, Upstream Xen Support for Libvirt [ Gsoc 2012]; suse, virtualization, xen, libvirt
1, Sanidhya Kashyap <sanidhya.iiith@gmail.com> 20120322_0258
I faced a lot of problems with xen 4.1 on openSUSE 12.1. So, I downgraded
my installation and I tried it on openSUSE 11.4 with xen 4.0 and right now
it is working fine.
I have also set up the libvirt dev env and is going through the
documentation of the libvirt.

If you want me to try out Xen 4.1. I'll try to install and make work Xen
4.1 as well.

2, reply
hi, Sanidhya
  
> I faced a lot of problems with xen 4.1 on openSUSE 12.1. So, I downgraded 
> my installation and I tried it on openSUSE 11.4 with xen 4.0 and right now 
> it is working fine. 
Do you try to debug the problem with the help of Jim? 
Actually, I can boot xen in my openSUSE12.1 on intel i3. So, maybe It is a hardware relative problem. It so, it is very important for the opensuse and xen community. Although, it is not about libvirt and xen tools. 
> I have also set up the libvirt dev env and is going through the 
> documentation of the libvirt. 
>  
> If you want me to try out Xen 4.1. I'll try to install and make work Xen 
> 4.1 as well. 
Actually, you should use upstream xen(xen-unstable) and libvirt, not xen4.1 or xen4.0. 
I hope You can prepare a develop environment with upstream xen and libvirt. 

best wishes

bamvor

14:31 2012-03-22
company, password, password recover, passsword expired
1, if password expired, send a email to servicedesk@novell.com by your direct manager. IT will send the reset password to him/her. 

15:18 2012-03-22
virtualization, suse, xen, libvirt, mirate
1, try libvirt migrate through xend. 
virsh migrate sles11_pv_1 xen+ssh://147.2.207.165
1), host "linux-bjzhang-2" can not be solved. 
add the follow line in "/etc/hosts":
147.2.207.165   linux-bjzhang-2.site linux-bjzhang-2
2), retry
linux-bvirt:/home/bamvor # virsh migrate sles11_pv_1 xen+ssh://147.2.207.165
Password:
error: POST operation failed: xend_post: error from xen daemon: (xend.err "can't connect: [Errno 111] Connection refused")
3), Lin Ma said that i need update xend configuration file. 
Modify /etc/xen/xend-config.sxp:
(xend-unix-server yes) (xend-relocation-server yes) (xend-relocation-port 8002)
(xend-relocation-address '')
(xend-relocation-hosts-allow '')
#(xend-relocation-hosts-allow '^localhost$ ^localhost\\.localdomain$')

Restart xend.

Live migration command: xm migrate -l <VM-ID> <Dest-IP>
-l for live migration.

(1), modify result
linux-bvirt:/etc/xen # diff xend-config.sxp.bak20120322_1532 xend-config.sxp
66c66
< #(xend-relocation-server no)
---
> (xend-relocation-server yes)
90c90
< #(xend-relocation-port 8002)
---
> (xend-relocation-port 8002)
116c116
< #(xend-relocation-address '')
---
> (xend-relocation-address '')
129,130c129,130
< #(xend-relocation-hosts-allow '')
< (xend-relocation-hosts-allow '^localhost$ ^localhost\\.localdomain$')
---
> (xend-relocation-hosts-allow '')
> #(xend-relocation-hosts-allow '^localhost$ ^localhost\\.localdomain$')
(2), restart xend
xend restart
4), error:
error: Domain not found: xenUnifiedDomainLookupByName
(1), search in source code
bamvor@linux-bjzhang-2:libvirt-0.9.6> grep Domain\ not\ found src -R
Binary file src/libvirt_util_la-virterror.o matches
Binary file src/libvirt_iohelper matches
Binary file src/libvirt_lxc-virterror.o matches
src/util/virterror.c:                errmsg = _("Domain not found");
src/util/virterror.c:                errmsg = _("Domain not found: %s");
Binary file src/.libs/libvirt_util_la-virterror.o matches
Binary file src/.libs/libvirt.so.0 matches
Binary file src/.libs/libvirt.so.0.9.6 matches
Binary file src/.libs/libvirt_util.a matches
Binary file src/.libs/libvirt.a matches
Binary file src/.libs/libvirt_test.a matches
Binary file src/.libs/libvirt.so matches
Binary file src/libvirt_lxc matches

this error is reported by the following functin:
virErrorMsg(virErrorNumber error, const char *info)

Lin Ma told that I need set shared storage, like NFS, iSCSI and so on. 
5), error 
linux-bvirt:/var/lib/xen/images_2/sles11_pv_3 # xm migrate sles11_pv_3 147.2.207.165
Error: /usr/lib64/xen/bin/xc_save 26 7 0 0 0 failed
6), finally, migration successful in source, but there is not vm in destination vm. 

6), error message in dest 
it looks like cpu version problem. source cpu(i7) is newer than dst cpu(i3). 
[2012-03-22 19:14:01 16727] DEBUG (XendDomainInfo:237) XendDomainInfo.restore(['domain', ['domid', '14'], ['cpu_weight', '256'], ['cpu_cap', '0'], ['pool_name', 'Pool-0'], ['bootloader', ''], ['vcpus', '4'], ['cpus', [[], [], [], []]], ['on_poweroff', 'destroy'], ['description', 'sles11 sp2 pv No.4'], ['on_crash', 'destroy'], ['uuid', 'a9e2990a-d7f2-e4be-b997-c35ac9466794'], ['bootloader_args', ''], ['name', 'sles11_pv_4'], ['on_reboot', 'restart'], ['maxmem', '512'], ['memory', '512'], ['shadow_memory', '0'], ['vcpu_avail', '15'], ['features', ''], ['on_xend_start', 'ignore'], ['on_xend_stop', 'ignore'], ['start_time', '1332414670.64'], ['cpu_time', '20.131292715'], ['online_vcpus', '4'], ['image', ['linux', ['kernel', ''], ['args', ' '], ['superpages', '0'], ['pci', []], ['nomigrate', '0'], ['tsc_mode', '0'], ['device_model', '/usr/lib/xen/bin/qemu-dm'], ['notes', ['FEATURES', 'writable_page_tables|writable_descriptor_tables|auto_translated_physmap|supervisor_mode_kernel'], ['VIRT_BASE', '18446744071562067968'], ['GUEST_VERSION', '2.6'], ['PADDR_OFFSET', '0'], ['GUEST_OS', 'linux'], ['HYPERCALL_PAGE', '18446744071562080256'], ['LOADER', 'generic'], ['INIT_P2M', '18446719884453740544'], ['SUSPEND_CANCEL', '1'], ['ENTRY', '18446744071562076160'], ['XEN_VERSION', 'xen-3.0'], ['MOD_START_PFN', '1'], ['SUPPORTED_FEATURES', '2063']]]], ['status', '2'], ['state', '-b----'], ['store_mfn', '1056889'], ['console_mfn', '1056888'], ['device', ['vif', ['bridge', 'br0'], ['mac', '00:16:3e:13:d3:74'], ['script', '/etc/xen/scripts/vif-bridge'], ['uuid', '46900a8e-2256-04ab-4ffb-a0d9fb1677cb'], ['backend', '0']]], ['device', ['vkbd', ['backend', '0']]], ['device', ['console', ['protocol', 'vt100'], ['location', '2'], ['uuid', '9571c4fb-d264-4de2-a920-58b68ad19946']]], ['device', ['vbd', ['protocol', 'x86_64-abi'], ['uuid', '6a7fa484-c846-9a8b-0f15-6b3ce386dfef'], ['bootable', '1'], ['dev', 'xvda:disk'], ['uname', 'file:/var/lib/xen/images_2/sles11_pv_4/disk0.raw'], ['mode', 'w'], ['backend', '0'], ['VDI', '']]], ['device', ['vfb', ['vncunused', '1'], ['vnc', '1'], ['uuid', 'd0edee46-e2e3-b5c0-65cd-33339a07d044'], ['location', '127.0.0.1:5901']]], ['change_home_server', 'False']])
[2012-03-22 19:14:01 16727] DEBUG (XendDomainInfo:2562) XendDomainInfo.constructDomain
[2012-03-22 19:14:01 16727] DEBUG (balloon:206) Balloon: 1577624 KiB free; need 16384; done.
[2012-03-22 19:14:01 16727] DEBUG (XendDomain:482) Adding Domain: 10
[2012-03-22 19:14:01 16727] DEBUG (XendDomainInfo:3514) Storing VM details: {'on_xend_stop': 'ignore', 'pool_name': 'Pool-0', 'shadow_memory': '0', 'uuid': 'a9e2990a-d7f2-e4be-b997-c35ac9466794', 'on_reboot': 'restart', 'start_time': '1332414670.64', 'on_poweroff': 'destroy', 'bootloader_args': '', 'on_xend_start': 'ignore', 'on_crash': 'destroy', 'xend/restart_count': '0', 'vcpus': '4', 'vcpu_avail': '15', 'bootloader': '', 'image': "(linux (kernel '') (args ' ') (superpages 0) (pci ()) (nomigrate 0) (tsc_mode 0) (device_model /usr/lib/xen/bin/qemu-dm) (notes (FEATURES 'writable_page_tables|writable_descriptor_tables|auto_translated_physmap|supervisor_mode_kernel') (VIRT_BASE 18446744071562067968) (GUEST_VERSION 2.6) (PADDR_OFFSET 0) (GUEST_OS linux) (HYPERCALL_PAGE 18446744071562080256) (LOADER generic) (INIT_P2M 18446719884453740544) (SUSPEND_CANCEL 1) (ENTRY 18446744071562076160) (XEN_VERSION xen-3.0) (MOD_START_PFN 1) (SUPPORTED_FEATURES 2063)))", 'name': 'sles11_pv_4'}
[2012-03-22 19:14:01 16727] DEBUG (image:343) No VNC passwd configured for vfb access
[2012-03-22 19:14:01 16727] DEBUG (XendCheckpoint:359) restore:shadow=0x0, _static_max=0x20000000, _static_min=0x0, 
[2012-03-22 19:14:01 16727] DEBUG (XendCheckpoint:386) [xc_restore]: /usr/lib64/xen/bin/xc_restore 4 10 1 2 0 0 0 0
[2012-03-22 19:14:47 16727] INFO (XendCheckpoint:487) xc: error: Couldn't set eXtended States for vcpu0 (22 = Invalid argument): Internal error
[2012-03-22 19:14:47 16727] DEBUG (XendDomainInfo:3150) XendDomainInfo.destroy: domid=10
[2012-03-22 19:14:47 16727] ERROR (XendDomainInfo:3164) XendDomainInfo.destroy: domain destruction failed.
Traceback (most recent call last):
  File "/usr/lib64/python2.6/site-packages/xen/xend/XendDomainInfo.py", line 3157, in destroy
    xc.domain_pause(self.domid)
Error: (3, 'No such process')
[2012-03-22 19:14:47 16727] DEBUG (XendDomainInfo:2470) No device model
[2012-03-22 19:14:47 16727] DEBUG (XendDomainInfo:2472) Releasing devices
[2012-03-22 19:14:47 16727] ERROR (XendCheckpoint:421) /usr/lib64/xen/bin/xc_restore 4 10 1 2 0 0 0 0 failed
Traceback (most recent call last):
  File "/usr/lib64/python2.6/site-packages/xen/xend/XendCheckpoint.py", line 390, in restore
    forkHelper(cmd, fd, handler.handler, True)
  File "/usr/lib64/python2.6/site-packages/xen/xend/XendCheckpoint.py", line 475, in forkHelper
    raise XendError("%s failed" % string.join(cmd))
XendError: /usr/lib64/xen/bin/xc_restore 4 10 1 2 0 0 0 0 failed
[2012-03-22 19:14:47 16727] ERROR (XendDomain:1200) Restore failed
Traceback (most recent call last):
  File "/usr/lib64/python2.6/site-packages/xen/xend/XendDomain.py", line 1184, in domain_restore_fd
    dominfo = XendCheckpoint.restore(self, fd, paused=paused, relocating=relocating)
  File "/usr/lib64/python2.6/site-packages/xen/xend/XendCheckpoint.py", line 422, in restore
    raise exn
XendError: /usr/lib64/xen/bin/xc_restore 4 10 1 2 0 0 0 0 failed

7), virt-manager xen vm configuation file: "/var/lib/xend/domains"

2, it seems that i need a lots work for migrate. just calm down and read documents. 
1), /usr/share/doc/manual/sles-xen_en-pdf/SLES-xen_en.pdf
5.6 Migrating Xen VM Guest Systems

3, besides, Jiaju ask me some question about libvirt. I found that I have a lot of work to do for libvirt. 
1), e.g.
(1), where is the libvirt configuration file
/etc/libvirt/libvirtd.conf
(2), where libvirt start while system started. 
2), jiaju suggestion
Jia Ju Zhang: I just take a glance at libvirt, the config file is libvritd.conf
Jia Ju Zhang: I think when you play with libvirt, you can also turn on all the debug option.
Jia Ju Zhang: and see the logs
Jia Ju Zhang: from the log, you can see some output, maybe you can guess what happened first, and then, look into the code.
Jia Ju Zhang: Then, you will understand the code path
Jia Ju Zhang: ok, and I jus found MIGRATION.txt in libvirt qemu directory.
Jia Ju Zhang: it will help you understand the migration process.

15:47 2012-03-22
时间管理
1, today
), reply GSoC student email before leave. 

12:54 2012-03-23
/lib/modules/3.0.13-0.27-default/source/README.SUSE
lrwxrwxrwx 1 root root        50 Feb 27 16:19 README.SUSE -> ../../share/doc/packages/kernel-source/README.SUSE

(5)  Make sure that /etc/modprobe.d/unsupported-modules contains
allow_unsupported_modules 1
otherwise modprobe will refuse to load any modules.

14:46 2012-03-23
software, skills, X11, fontsize
1, system font
Application Browser -> Appearance
set all font size to 12. 
2, terminal
1), mlterm
set mlterm font size as 18, it is suitable for dell 20 inch display monitor. 
bamvor@linux-bvirt:~> cat .mlterm/main
fontsize=18
3, gvim
\TODO

15:11 2012-03-23
computer, display adapter
1, install ati driver from official website

16:34 2012-3-23
suse, virtualization, xen, libvirt, migrate; the difference between xend and xenlight xml
1, virsh create domain fail with xenlight
1), error
domainbuilder: detail: xc_dom_allocate: cmdline=" ", features="(null)"
domainbuilder: detail: xc_dom_kernel_file: filename="(null)"
libxl: error: libxl_dom.c:168:libxl__build_pv xc_dom_kernel_file failed: Bad address
domainbuilder: detail: xc_dom_release: called
xc: debug: hypercall buffer: total allocations:20 total releases:20
xc: debug: hypercall buffer: current allocations:0 maximum allocations:2
xc: debug: hypercall buffer: cache current size:2
xc: debug: hypercall buffer: cache hits:17 misses:2 toobig:1
2), but xl create successful with the same configuation. 
3), the problem is the position of bootloader and bootargs
fail: 
  <os type='sles11'>
    <type>linux</type>
    <bootloader>/usr/bin/pygrub</bootloader>
    <bootargs>--entry=xvda2:/boot/vmlinuz-xen,/boot/initrd-xen</bootargs>
    <cmdline> </cmdline>
  </os>
successful
  <bootloader>/usr/bin/pygrub</bootloader>
  <bootargs>--entry=xvda2:/boot/vmlinuz-xen,/boot/initrd-xen</bootargs>
  <os type='sles11'>
    <type>linux</type>
    <cmdline> </cmdline>
  </os>
i do not know why. it work while using xend. 
\todo: maybe it is a bug in libvirt libxl driver. 
2, migrate successful from i3 to i7.
virsh migrate sles11_pv_4 xen+ssh://147.2.207.72

18:00 2012-03-23
software, skills, vim, gvim, font size, set gvim font size; gvimrc
1, ref http://www.troubleshooters.com/linux/vifont.htm
1), choice font and size from gvim menu: "Edit" -> "select Font". 
2), get font configuration from ":set gfn?" 
guifont=Monospace 14
3), set it to .gvimrc
bamvor@linux-bjzhang-2:~> cat .gvimrc
set gfn=Monospace\ 14

18:56 2012-03-23
时间管理
1, today
1), try migrate with libvirt libxl driver writen by Chunyan Liu. successful(non-live). 

17:22 2012-3-25
kernel, debug
1), serial log and serial login
ref: http://blog.csdn.net/coofive/article/details/656157
add to kernel parameter: console=tty1 console=ttyS1,115200
add to /etc/inittab: "co:2345:respawn:/sbin/agetty ttyS0 9600 vt100"

2), add the folowings according to kernel-parameter.txt(Documentation): 
debug           [KNL] Enable kernel debugging (events log level).
earlycon=ttyS1,115200
earlyprintk=ttyS1,115200
loglevel=8

13:23 2012-03-26
时间管理
1, today
1), 20' reply GSoC student Ashish mail.
2), read libvirt and qemu doc. see"15:12 2012-03-26".
3), compare qemu and libxl driver in libvirt. see"15:13 2012-03-26".
4), work report. see"21:05 2012-3-26"

15:13 2012-03-26
(18:16 2012-03-27)
suse, virtualization, libvirt, qemu, xen, document; compare qemu and libxl driver in libvirt
1, read libvirt doc
there is a api extension. and how to implement an API in qemu/xen. 
file:///usr/local/share/doc/libvirt-0.9.6/html/api_extension.html
xen/suse_svn/branches/SLE11-SP2-Branch/libvirt/libvirt-0.9.6/docs/api_extension

2, read libvirt qemu driver doc
1), THREADS.txt
illustrate the details of locks in qemu driver. 

3, getting the functino not implement by libxl
0), new function add to upstream after sles11 sp2
domainReset
domainBlockResize
domainSnapshotNumChildren
domainSnapshotListChildrenNames
domainSnapshotGetParent
domainOpenGraphics
domainBlockRebase
nodeSuspendForDuration
domainSetBlockIoTune
domainGetBlockIoTune
domainSetNumaParameters
domainGetNumaParameters
domainGetInterfaceParameters
domainSetInterfaceParameters
domainGetDiskErrors
domainSetMetadata
domainGetMetadata
domainMigrateConfirm3
1), if not specified, the API function of libvirt is added before sles11 sp2. 
(1), domainSetMemoryParameters
 * Change all or a subset of the memory tunables.
 * This function may require privileged access to the hypervisor.
(2), domainGetMemoryParameters
 * Get all memory parameters, the @params array will be filled with the values
 * equal to the number of parameters suggested by @nparams
 *
 * As the value of @nparams is dynamic, call the API setting @nparams to 0 and
 * @params as NULL, the API returns the number of parameters supported by the
 * HV by updating @nparams on SUCCESS. The caller should then allocate @params
 * array, i.e. (sizeof(@virTypedParameter) * @nparams) bytes and call the API
 * again.
 *
 * Here is a sample code snippet:
 *
 * if ((virDomainGetMemoryParameters(dom, NULL, &nparams, 0) == 0) &&
 *     (nparams != 0)) {
 *     if ((params = malloc(sizeof(*params) * nparams)) == NULL)
 *         goto error;
 *     memset(params, 0, sizeof(*params) * nparams);
 *     if (virDomainGetMemoryParameters(dom, params, &nparams, 0))
 *         goto error;
 * }
 *
 * This function may require privileged access to the hypervisor. This function
 * expects the caller to allocate the @params.
(3), domainSetBlkioParameters
 * Change all or a subset of the blkio tunables.
 * This function may require privileged access to the hypervisor.
(4), domainGetBlkioParameters
 * Get all blkio parameters, the @params array will be filled with the values
 * equal to the number of parameters suggested by @nparams.
 * See virDomainGetMemoryParameters for an equivalent usage example.
 *
 * This function may require privileged access to the hypervisor. This function
 * expects the caller to allocate the @params.
(5), domainGetControlInfo
 * Extract details about current state of control interface to a domain.
(6), domainSaveImageGetXMLDesc
 * This method will extract the XML describing the domain at the time
 * a saved state file was created.  @file must be a file created
 * previously by virDomainSave() or virDomainSaveFlags().
 *
 * No security-sensitive data will be included unless @flags contains
 * VIR_DOMAIN_XML_SECURE; this flag is rejected on read-only
 * connections.  For this API, @flags should not contain either
 * VIR_DOMAIN_XML_INACTIVE or VIR_DOMAIN_XML_UPDATE_CPU.
(7), domainSaveImageDefineXML
 * This updates the definition of a domain stored in a saved state
 * file.  @file must be a file created previously by virDomainSave()
 * or virDomainSaveFlags().
 *
 * @dxml can be used to alter host-specific portions of the domain XML
 * that will be used when restoring an image.  For example, it is
 * possible to alter the backing filename that is associated with a
 * disk device, to match renaming done as part of backing up the disk
 * device while the domain is stopped.
 *
 * Normally, the saved state file will remember whether the domain was
 * running or paused, and restore defaults to the same state.
 * Specifying VIR_DOMAIN_SAVE_RUNNING or VIR_DOMAIN_SAVE_PAUSED in
 * @flags will override the default saved into the file; omitting both
 * leaves the file's default unchanged.  These two flags are mutually
 * exclusive.
((1)), compare domainSaveImageGetXmlDesc and domainSaveImageDefineXML
sequence:
virCheckFlags();		//different flags
qemuDriverLock(driver);
qemuDomainSaveImageOpen();	//difference: xmlin, state, edit. saferead XML
qemuDomainDefFormatXML();	//different flags
safewrite();			//only in DefineXML. save XML.

duing qemuDomainSaveImageOpen, call saferead to read domain XML according to thepath parameter which is passed by file paramter through virsh command or other place. 

(8), (17:26 2012-03-28)
((1)), domainScreenshot(src/libvirt.c)
 * Take a screenshot of current domain console as a stream. The image format
 * is hypervisor specific. Moreover, some hypervisors supports multiple
 * displays per domain. These can be distinguished by @screen argument.
 *
 * This call sets up a stream; subsequent use of stream API is necessary
 * to transfer actual data, determine how much data is successfully
 * transfered, and detect any errors.
 *
 * The screen ID is the sequential number of screen. In case of multiple
 * graphics cards, heads are enumerated before devices, e.g. having
 * two graphics cards, both with four heads, screen ID 5 addresses
 * the second head on the second card.
((2)), This function is good pratise for "Invoking a monitor command on a virDomainObjPtr". It seems that the core function is "qemuMonitorScreendump". In qemuMonitorScreendump, screendump is sent to qemu monitor by qemuMonitorSend. 
qemu monitor command: 
screendump filename
    Save screen into PPM image filename. 

(9), domainPinVcpuFlags
((1)), functions:
 * Dynamically change the real CPUs which can be allocated to a virtual CPU.
 * This function may require privileged access to the hypervisor.
 *
 * This command only changes the runtime configuration of the domain,
 * so can only be called on an active domain.
((2)), qemu implementation:

(10), domainGetVcpuPinInfo
((1)), functions:
 * Query the CPU affinity setting of all virtual CPUs of domain, store it
 * in cpumaps.
((2)), notes:
very similiar functions: domainPinVcpuFlags, domainGetVcpuPinInfo
I do not know the different between them in code level. 

(11), (13:32 2012-03-29)
domainGetMaxVcpus
((1)), functions
 * Provides the maximum number of virtual CPUs supported for
 * the guest VM. If the guest is inactive, this is basically
 * the same as virConnectGetMaxVcpus(). If the guest is running
 * this will reflect the maximum number of virtual CPUs the
 * guest was booted with.  For more details, see virDomainGetVcpusFlags().
((2)), notes:
this function is not important. it is only called while virDomainGetVcpusFlags failed in vcpucount. 

(12), GetSecurityLabel(SKIP)
((1)), domainGetSecurityLabel
 * Extract security label of an active domain. The 'label' field
 * in the @seclabel argument will be initialized to the empty
 * string if the domain is not running under a security model.
((2)), nodeGetSecurityModel
 * Extract the security model of a hypervisor. The 'model' field
 * in the @secmodel argument may be initialized to the empty
 * string if the driver has not activated a security model.
((3)), xl not support security label while xm support. 

(13), migrate
\TODO: i did not read the code of following function. 
((1)), functions: domainMigratePerform, domainMigratePrepare2, domainMigrateFinish2, domainMigratePrepareTunnel, domainMigratePrepareTunnel3

((2)), type of migration
a, virDomainMigrateVersion2
 * Sequence v2:
 *
 *  Src: DumpXML
 *        - Generate XML to pass to dst
domainGetXMLDesc
 *
 *  Dst: Prepare
 *        - Get ready to accept incoming VM
 *        - Generate optional cookie to pass to src
domainMigratePrepare2
 *
 *  Src: Perform
 *        - Start migration and wait for send completion
 *        - Kill off VM if successful, resume if failed
domainMigratePerform
 *
 *  Dst: Finish
 *        - Wait for recv completion and check status
 *        - Kill off VM if unsuccessful
domainMigrateFinish2

b, virDomainMigratePeer2Peer
  * In normal migration, the libvirt client co-ordinates communication
  * between the 2 libvirtd instances on source & dest hosts.
  *
  * In this peer-2-peer migration alternative, the libvirt client
  * only talks to the source libvirtd instance. The source libvirtd
  * then opens its own connection to the destination and co-ordinates
  * migration itself.
domainMigratePerform3 or domainMigratePerform

c, remote
virDomainMigratePrepareTunnel
virDomainMigratePrepareTunnel3
virDomainMigrateConfirm3
functions: domainMigratePrepareTunnel, domainMigratePrepareTunnel3
domainMigrateConfirm3(add from libvirt upstream)

((3)), migrate speed(SKIP)
a, funtions
domainMigrateSetMaxDowntime
domainMigrateSetMaxSpeed
domainMigrateGetMaxSpeed
b, qemu monitor
migrate_set_downtime second
    Set maximum tolerated downtime (in seconds) for migration. 
c, notes:
it seems that this function is not support by the xm or xl. 

(14), BlockStats
((1)), domainBlockStats
 * This function returns block device (disk) stats for block
 * devices attached to the domain.
 *
 * The path parameter is the name of the block device.  Get this
 * by calling virDomainGetXMLDesc and finding the <target dev='...'>
 * attribute within //domain/devices/disk.  (For example, "xvda").
 *
 * Domains may have more than one block device.  To get stats for
 * each you should make multiple calls to this function.
 *
 * Individual fields within the stats structure may be returned
 * as -1, which indicates that the hypervisor does not support
 * that particular statistic.
((2)), domainBlockStatsFlags

((3)), qemuMonitorGetBlockStatsInfo is called by both of these functions. 
qemu command: 
info blockstats
    show block device statistics 

((4)), try these commands, maybe it is easy for me to implement.
linux-bvirt:/etc/xen/vm # virsh version
Compiled against library: libvir 0.9.6
Using library: libvir 0.9.6
Using API: Xen 0.9.6
Running hypervisor: Xen 4.1.0

linux-bvirt:/etc/xen/vm # virsh domblklist sles11_pv_1
Target     Source
------------------------------------------------
xvda       /var/lib/xen/images/sles11_pv_1/disk0.raw

linux-bvirt:/etc/xen/vm # virsh domblkinfo sles11_pv_1 xvda
error: this function is not supported by the connection driver: virDomainGetBlockInfo

linux-bvirt:/etc/xen/vm # virsh domblkstat sles11_pv_1 xvda
xvda rd_req 10381
xvda rd_bytes 213525504
xvda wr_req 897
xvda wr_bytes 10186752
xvda errs 0

((5)), read code in libvirt xen driver
xenUnifiedDomainBlockStats call read_bd_stas to get the statistics from sysfs. 
it looks like libvirt xen driver does not do this through hypervisor?!

((6)), (13:34 2012-03-30)
\TODO: according to the work in yestoday, maybe it is possible for libvirt libxl driver to implement this API.

(15), domainInterfaceStats(EASY TO IMPLEMENT)
((1)), functions
 * This function returns network interface stats for interfaces
 * attached to the domain.
 *
 * The path parameter is the name of the network interface.
 *
 * Domains may have more than one network interface.  To get stats for
 * each you should make multiple calls to this function.
 *
 * Individual fields within the stats structure may be returned
 * as -1, which indicates that the hypervisor does not support
 * that particular statistic.
((2)), both qemu and xen(xm) call linuxDomainInterfaceStats to get the statistics: 
/*-------------------- interface stats --------------------*/
/* Just reads the named interface, so not Xen or QEMU-specific.
 * NB. Caller must check that libvirt user is trying to query
 * the interface of a domain they own.  We do no such checking.
 */

(16), domainMemoryStats
((1)), function
 * This function provides memory statistics for the domain.
 *
 * Up to 'nr_stats' elements of 'stats' will be populated with memory statistics
 * from the domain.  Only statistics supported by the domain, the driver, and
 * this version of libvirt will be returned.
 *
 * Memory Statistics:
 *
 * VIR_DOMAIN_MEMORY_STAT_SWAP_IN:
 *     The total amount of data read from swap space (in kb).
 * VIR_DOMAIN_MEMORY_STAT_SWAP_OUT:
 *     The total amount of memory written out to swap space (in kb).
 * VIR_DOMAIN_MEMORY_STAT_MAJOR_FAULT:
 *     The number of page faults that required disk IO to service.
 * VIR_DOMAIN_MEMORY_STAT_MINOR_FAULT:
 *     The number of page faults serviced without disk IO.
 * VIR_DOMAIN_MEMORY_STAT_UNUSED:
 *     The amount of memory which is not being used for any purpose (in kb).
 * VIR_DOMAIN_MEMORY_STAT_AVAILABLE:
 *     The total amount of memory available to the domain's OS (in kb).
 * VIR_DOMAIN_MEMORY_STAT_ACTUAL_BALLOON:
 *     Current balloon value (in kb).
((2)), qemu monitor
info balloon
    show balloon information 
((3)), this function is not supported by xm and xl. 

(17), read the content of domain's block or memory
((1)), domainBlockPeek
 * This function allows you to read the contents of a domain's
 * disk device.
 *
 * Typical uses for this are to determine if the domain has
 * written a Master Boot Record (indicating that the domain
 * has completed installation), or to try to work out the state
 * of the domain's filesystems.
((2)), this function read the disk from hypervisor directly. 
\TODO: read the code in qemu and xen driver.
((3)), domainMemoryPeek(SKIP)
qemu monitor: memsave or pmemsave
it is not supported by xm or xl.

(18), domainGetBlockInfo
\TODO

(19), nodeGetCPUStats
 * This function provides individual cpu statistics of the node.
 * If you want to get total cpu statistics of the node, you must specify
 * VIR_NODE_CPU_STATS_ALL_CPUS to @cpuNum.
 * The @params array will be filled with the values equal to the number of
 * parameters suggested by @nparams
nodeGetCPUStats and nodeGetMemoryStats is implemented by nodeinfo.c 

(20), nodeGetCellsFreeMemory
((1)), function
 * This call returns the amount of free memory in one or more NUMA cells.
 * The @freeMems array must be allocated by the caller and will be filled
 * with the amount of free memory in bytes for each cell requested,
 * starting with startCell (in freeMems[0]), up to either
 * (startCell + maxCells), or the number of additional cells in the node,
 * whichever is smaller.
((2)), qemu call nodeinfo.c while xen do it through xen hypervisor. 

(21), node Device management(EASY TO IMPLEMENT)
((1)), functions
nodeDeviceDettach
 * Dettach the node device from the node itself so that it may be
 * assigned to a guest domain.
 *
 * Depending on the hypervisor, this may involve operations such
 * as unbinding any device drivers from the device, binding the
 * device to a dummy device driver and resetting the device.
nodeDeviceReAttach
 * Re-attach a previously dettached node device to the node so that it
 * may be used by the node again.
 *
 * Depending on the hypervisor, this may involve operations such
 * as resetting the device, unbinding it from a dummy device driver
 * and binding it to its appropriate driver.
nodeDeviceReset
 * Reset a previously dettached node device to the node before or
 * after assigning it to a guest.
 *
 * The exact reset semantics depends on the hypervisor and device
 * type but, for example, KVM will attempt to reset PCI devices with
 * a Function Level Reset, Secondary Bus Reset or a Power Management
 * D-State reset.
((2)), these functions are implemented by pciXxxDevice. 

(22), isEncrypted and isSecure
\TODO: qemu return fixed value. Is that mean these function is important?!

(23), \TODO: cpuCompare cpuBaseline

(24), domainGetJobInfo
 * Extract information about progress of a background job on a domain.
 * Will return an error if the domain is not active.
\TODO

(25), domainAbortJob(SKIP)
 * Requests that the current background job be aborted at the
 * soonest opportunity. This will block until the job has
 * either completed, or aborted.

qemu monitor
migrate_cancel
    Cancel the current VM migration. 

it is not support by xm and xl. 

(26), snapshot
domainSnapshotCreateXML
domainSnapshotGetXMLDesc
domainSnapshotNum
domainSnapshotListNames
domainSnapshotLookupByName
domainHasCurrentSnapshot
domainSnapshotCurrent
domainRevertToSnapshot
domainSnapshotDelete

notes: xen disk snapshot: 
"how to make snapshot disk backup of Xen Guest Domain".
lvcreate ... snapshot
kpartx -av
kpartx -dv

(27), domainOpenConsole(EASY TO IMPLEMENT)
 * If the @dev_name is omitted, then the first console or serial
 * device is opened. The console is associated with the passed
 * in @st stream, which should have been opened in non-blocking
 * mode for bi-directional I/O.
both xm and qemu call virFDStreamOpenFile eventually. 

(28), domainInjectNMI(SKIP)
only qemu implement it. 

(29), domainSendKey

(30), block
domainBlockJobAbort
domainGetBlockJobInfo
domainBlockJobSetSpeed
domainBlockPull

these four functions is called by blockpull and blockjob(virsh cmd). 

(30), (INGORE) qemu specific command
qemuDomainMonitorCommand
qemuDomainAttach

(31), domainReset
similar to domainReboot, but simulate the reset button. 

\TODO
domainBlockResize
domainSnapshotNumChildren
domainSnapshotListChildrenNames
domainSnapshotGetParent
domainOpenGraphics
domainBlockRebase
nodeSuspendForDuration
domainSetBlockIoTune
domainGetBlockIoTune
domainSetNumaParameters
domainGetNumaParameters
domainGetInterfaceParameters
domainSetInterfaceParameters
domainGetDiskErrors
domainSetMetadata
domainGetMetadata


3, conclusion
1), snapshot is not implemented in libvirt libxl driver. 
This is a big work for me. 
2), lots of function of read/write of status or configuration is not implemented. 
I hope I implement some of them in order to be fimiliar with the libvirt driver.
3), it is easy to implement for the following functions, domainInterfaceStats, node Device management, domainOpenConsole.
these functions are implemented by common function in qemu and xen(xm).

16:08 2012-3-26
company, suse, All Hands Meeting, Nils, General Manager of SUSE
sap
review FY12 objectives: april 2011 to march 2012
profit : close to redhat ?
在中国拿到了大客户, 有很强的示范作用。
strategy:
enterprise computing
cloud infrastructur: openstack. this is the future.
integrated system

21:05 2012-3-26
(9:53 2012-3-27)
work report - week 12
1, bamvor jian zhang work report
[devel-server] work report - week 12
[green]
1), try libvirt virsh migrate command before read the migration code of Chunyan Liu. I got two things, i do know whether it is a bug or not. 
(1), migrate from intel i3 system to intel i7 system fail in sles11 sp2. but successful in previous versions.
(2), virsh create fail with xenlight, but success with xen with the same configuration file. 
wrong XML: 
  <os type='sles11'>
    <type>linux</type>
    <bootloader>/usr/bin/pygrub</bootloader>
    <bootargs>--entry=xvda2:/boot/vmlinuz-xen,/boot/initrd-xen</bootargs>
    <cmdline> </cmdline>
  </os>
after change the order in XML, virsh create success with xenlight:
  <bootloader>/usr/bin/pygrub</bootloader>
  <bootargs>--entry=xvda2:/boot/vmlinuz-xen,/boot/initrd-xen</bootargs>
  <os type='sles11'>
    <type>linux</type>
    <cmdline> </cmdline>
  </os>

2), Jim talk with me. He hope that I would add missing function in libvirt libxl driver. 

3), There are two students interested in my GSoC project(Upstream xen support for libvirt). Contact with them. 

2, (17:53 2012-03-31)
Jim_reply_20120331_0110

Bamvor Jian Zhang wrote:
>
> [green]
> 1), try libvirt virsh migrate command before read the migration code
> of Chunyan Liu. I got two things, i do know whether it is a bug or not.
> (1), migrate from intel i3 system to intel i7 system fail in sles11
> sp2. but successful in previous versions.

Hmm, typically migrations would fail when the src is i7 and dst is i3,
but work if src is i3 and dst is i7.  Generally, the src and dst cpus
should be similar for migration.  The cpu presented to the guest can be
dumbed-down though, with e.g. Xen's cpuid setting, allowing migration
amongst machines with different cpu features.

> (2), virsh create fail with xenlight, but success with xen with the
> same configuration file.
> wrong XML:
>   <os type='sles11'>
>     <type>linux</type>
>     <bootloader>/usr/bin/pygrub</bootloader>
>     <bootargs>--entry=xvda2:/boot/vmlinuz-xen,/boot/initrd-xen</bootargs>
>     <cmdline> </cmdline>
>   </os>
> after change the order in XML, virsh create success with xenlight:
>   <bootloader>/usr/bin/pygrub</bootloader>
>   <bootargs>--entry=xvda2:/boot/vmlinuz-xen,/boot/initrd-xen</bootargs>
>   <os type='sles11'>
>     <type>linux</type>
>     <cmdline> </cmdline>
>   </os>

Right.  <bootloader> and <bootargs> are sub-elements of the top level
<domain> element, not the <os> element.  Your first example is invalid
libvirt domainXML and would not pass virt-xml-validate.  It should not
work with the legacy xen driver either.

Regards,
Jim

3, read code
1), cpuid
(1), xen:
cpuid is defined in libxl_cpuid_parse_config()(xen/tools/libxl/libxl_cpuid.c)
(2), libvirt:
cpuid is defined libvirt/src/cpu/cpu_map.xml

4, reply to Jim
thanks your help. 
> The cpu presented to the guest can be
> dumbed-down though, with e.g. Xen's cpuid setting, allowing migration
> amongst machines with different cpu features.
I had found the definition of cpuid in both xen and libvirt. i will try it.

> Right.  <bootloader> and <bootargs> are sub-elements of the top level
> <domain> element, not the <os> element.  Your first example is invalid
> libvirt domainXML and would not pass virt-xml-validate.  It should not
> work with the legacy xen driver either.
i understand. meanwhile, the wrong configuration is created by vm-install(I had verified it today), So, it may be a bug in vm-install?  and it could be created successful with xend in libvirt. 
Maybe I need the check the difference between libvirt xen driver and libxl driver? 

9:52 2012-3-27
时间管理
1, today
1), 9:53-10:27 work report. see"9:53 2012-3-27".
被杂事打断15' 

10:35 2012-3-27
openSUSE, GSoC
1, Dear Sir,

I was wondering if you could give me some more ideas as to what the requirements are. I will try to merge it with a few more functions and would like to work on the project after gsoc as well.

I have added my skills and work experience below. Unfortunately I don't have experience with virtualization but I don't have any other commitments during the summer. And so I expect that I will be able to learn the concepts very quickly. 

Skills 

* Advanced user of Java, C and C++
* Proficient in Objective-C and iPhone development
* Proficient in HTML5, CSS, Perl, Python, JavaScript, XML, AJAX, PHP and MySQL
* Proficient in VHDL and ASIC circuit design
* Proficient in Linux development environment

Work Experience 

Embedded Systems Development, Capstone Project

* Designed the architecture for Fall Assist – a device which detects when people have fallen
* Developed software for the LPC 2148 microcontroller
* Connected the microcontroller to accelerometer, gyro and wifi chips using SPI and I2C interfaces

Software Tools Developer, Research in Motion

* Developed and maintained testing tools used to test SQLite on the BlackBerry Torch
* Developed automation software to perform Blackbox tests on SQLite for BlackBerry Torch
* Created new test procedures and updated existing test procedures used to test SQLite
* Worked with developers to ensure that all bugs were fixed

Programmer/Analyst – IM Tools, Web and Graphic Services – Canada, Shell Canada 

* Performed adhoc reporting and bulkloading of documents
* Involved in the development of home grown software tools used like Livelink monitor and 
a tool to update database permissions on all of livelink
* Provided application support for different software such as Recycle Bin, Livelink Monitor, Database permissions tool and several database tables


PROJECT WORK

imageComm (iPhone Application) - imageComm allows autistic users to communicate using pictures as a communication aid

StockQuote (iPhone Application) - StockQuote allows users to look up real-time stock prices for any US stock


RESEARCH PROJECTS

* Social Networks – Currently working on a project to optimize query performance of social networks. 
* Image Processing – Completed a project to compress stereo images using the Exhaustive Block Matching algorithm. Published a research paper in July 2011
* Cloud Computing – Conducted research on the security risks associated with cloud computing. Published a research paper in August 2011


Thank you.

Sincerely,
Ashish



On Sun, Mar 25, 2012 at 10:40 PM, Bamvor Jian Zhang <bjzhang@suse.com> wrote:

hi, ashish

i am sorry for receiving your mail so late.

the network is broken in our company. i send this mail throught other device. maybe format is not good.

it is not the initial goal of this project  , but it is ok, if you want do it as a gsoc project. and i'd like to mentor you. if so, you need to pick up your own specific functions you want to do.

do you experience in virtualiztion area
could you give me your self-introduction or resume to me  and give me a chance to know you. 

besides, we are in the different time zone.  usually, i am online from utc2 to utc11.
irc freenode  bamvor


looking forward you reply.

best wishes.

bamvor>



> Ashish Agarwal 2012-3-25 上午 11:16 >>>

Dear Sir,

My name is Ashish and I am a student at Simon Fraser University in Canada. I am
doing my undergraduate degree in Computer Engineering and this is my final year.



In the last few years I have had quite a bit of experience working with C (operating systems)
 and other  programming languages like C++, Java through university projects and a number of 
internships. I was looking at OpenSuse ideas page for gsoc-2012 and was interested 
in applying for the project - Upstream Xen Support for Libvirt. 


I noticed that the libxenlight driver has only the basic features - suspend, resume, etc and I 
understand that some of the objectives of this project would be to add more features
such as - create and restore. Am I right ?


Is it possible for you to give me some more insight as to what problem this project is 
aiming to solve ?


Thank you
Ashish Agarwal

2, reply
> I was wondering if you could give me some more ideas as to what the 
> requirements are. I will try to merge it with a few more functions and would 
> like to work on the project after gsoc as well.
requirement:
1), c language.
2), experience in Linux user space development. 
3), virtualization knowledge is a plus. 
> I have added my skills and work experience below. Unfortunately I don't have 
> experience with virtualization but I don't have any other commitments during 
> the summer. And so I expect that I will be able to learn the concepts very 
> quickly. 
It is ok. you can start to learn some virtualization knowledge, especially in xen and libvirt. you could subscribe the following maillist: xen-devel, libvir-list, opensuse-project, opoensuse virtualization. 

As we talked yestoday, there are a lot of work in libvirt libxl driver. 
Maybe you can choice this backport work as your GSoC project: libvirt libxl driver work good with xen4.1, but not work with xen4.2(xen-unstable). You could fix these issue while you learn more details about libvirt and xen. It is a wonderful work for both libvirt community and youself. for you, you could add functions in libvirt libxl driver after u understand deeply in libvirt and xenlight. 

If you are very interested in this project. you should prepare and send the mail to opensuse-project maillist and prepare your apply of GSoC. After students application, openSUSE community will rate and decide to choice the project and student. 

looking forward your wonderful work. 
best wishes.

bamvor. 

11:13 2012-3-27
suse, virtualization, xen, libvirt, migrate
"Chunyan Liu"_"[PATCH v2] Add migration APIs for libxl driver"_20120327_1059
Hi, Bamvor,
Following is the latest patch for migration APIs.
Unfortunately, there is some work not finished yet, still need your help to
finish that:
a. The problem issuing virsh command will kill live migration still unsolved.
b. Because of BeiJing office network problem, some testing not done yet,
including: item a and d in "Changes".

Changes:
a. Use virNetSocket* APIs instead of socket(), connect() APIs in
libxlDomainMigratePerform3().
b. Use general function libxlNextFreePort() instead of libxlNextFreeVncPort and
libxlFindFreeMigPort.
c. Rename libxlReadFixedMessage() to libxlCheckMessageBanner().
d. Update vm status to VIR_DOMAIN_PAUSED and event when migration failed and vm
resume failed on source side.
e. Fix #define whitespace according to Jim's comments.

Not changed:
a. doParseURI not changed since virURIParse couldn't handle hostname:port format URI correctly.
b. libxlDomainMigrateBegin3() not changed to unlock driver earlier. This function
is not time-consuming, will finish soon, unlock driver earlier or later won't
have much difference, same is libxlDomainMigrateFinish3() and
libxlDomainMigrateConfirm3(). If unlock earlier, all these three functions
should be handled.

18:14 2012-03-27
GTD
1, today
1), GSoC. 
2), -19:02 20:50- read libvirt qemu driver. see"15:13 2012-03-26"3. 
3), Jiaju: it is very important adding snapshot function to libvirt libxl driver. 
4), 10' help Rui Zhu for pluging and moving the cable of network. 

16:03 2012-03-28
GTD
1, today
1), computer: sles11 sp2(intel i3) can not use because root filesystem(btrfs) is almost full(90% full). 
2), -18:48 libvirt qemu driver reading. see"17:26 2012-03-28".

18:10 2012-03-28
suse, virtualization, xen, libvirt, libvirt start up, libvirtd
1, command
libvirtd -d -l
"-d": Run as a daemon & write PID file.
"-l": Listen for TCP/IP connections. 
2, daemon/libvirtd.c
main -> virInitialize()
     -> daemonInitialize()


10:35 2012-3-29
GSoC
1, Sanidhya mail 2012-3-27
I did try to download the repo but the following message is displayed :

Cloning into qemu-xen-unstable...
fatal: read error: Connection reset by peer

Since, the repo is not available. 

What we can do is rit now we can start working with the stable version that gets loaded and then later we can shift to the new unstable when they fix this problem. Since the xenlight repo has been made available from 4.x version although some major changes were made in the 4.1 version but the 4.1 version of suse is not working properly which I have already checked. If you allow me then, I can try it on different distros as well as I am quite familiar with other distros as well.

Regards,
Sanidhya 

2, reply
1), attachment
(1), xen compile log.
(2), 
2), email
Hi, Sanidhya

sorry for replying your email so later. The network of our company still not work...

after check your email, I have tried to recompile the xen-unstable, it is successful. u could get the compile log from attachment. 
Maybe the xen git server is not stable. 

you could try "make tools" instead of "make world" while compile xen, we only need the upstream xen tools while we do this backport work for upstream libvirt. 

meanwhile I can send the qemu repo to u if u need.

> If you allow me then, I can try it on different distros as well as I am quite 
> familiar with other distros as well.
It is ok, go ahead. 

best wishes
bamvor

3, FW "[gsoc-mentors] Handling students & proposals"
hi, 

the following is a email for openSUSE GSoC mentors.
Maybe It is useful for you to know how we works. 
If u want to register my GSoC project, i'd love to discuss about your application for GSoC. 

best wishes.

bamvor

13:08 2012-03-29
GTD
0, 12:10-18:00

1, today
1), 20' reply GSoC student mail. see"10:35 2012-3-29".
2), 13:28-17:52 libvirt qemu driver reading. see"13:32 2012-03-29".
interrupt by "3)" and something else. 
3), try xen hvm usb devices configuration. see"17:10 2012-03-29".

17:10 2012-03-29
virtualization, xen, add usb device to xen HVM, test: CMB dongle and Dlink DWL-G122
1, get usb device vid and pid from dmesg or proc
linux-bvirt:/etc/xen/vm # cat /proc/bus/usb/devices 
......
T:  Bus=02 Lev=03 Prnt=05 Port=01 Cnt=01 Dev#= 12 Spd=12   MxCh= 0
D:  Ver= 2.00 Cls=00(>ifc ) Sub=00 Prot=00 MxPS=16 #Cfgs=  1
P:  Vendor=096e ProdID=a010 Rev=20.08
S:  Manufacturer=USB_KEY
S:  Product=USB_KEY
C:* #Ifs= 1 Cfg#= 1 Atr=80 MxPwr=100mA
I:* If#= 0 Alt= 0 #EPs= 0 Cls=03(HID  ) Sub=00 Prot=00 Driver=(none)
......

2, xm usb-list-assignable-devices List all the assignable usb devices
linux-bvirt:/etc/xen/vm # xm usb-list-assignable-devices
2-1.3        : ID 413c:2106 Dell Dell QuietKey Keyboard
2-1.4        : ID 046d:c05a Logitech USB Optical Mouse
2-1.5.2      : ID 07d1:3c03 Ralink 802.11 bg WLAN

3, add usb device to HVM
linux-bvirt:/etc/xen/vm # xm usb-add --help
Usage: xm usb-add <domain> <[host:bus.addr] [host:vendor_id:product_id]>

Add the usb device to FV VM.
linux-bvirt:/etc/xen/vm # xm usb-add 6 host:096e:a010

4, after add
HVM will display the new hardware. I can find the new HID devices. The vid, pid and revision is right. 

5, log in dmesg
[86116.060257] usb 2-1.5.2: new full-speed USB device number 12 using ehci_hcd
[86116.154242] usb 2-1.5.2: New USB device found, idVendor=096e, idProduct=a010
[86116.154246] usb 2-1.5.2: New USB device strings: Mfr=1, Product=2, SerialNumber=0
[86116.154249] usb 2-1.5.2: Product: USB_KEY
[86116.154251] usb 2-1.5.2: Manufacturer: USB_KEY
[86116.155049] usbhid 2-1.5.2:1.0: couldn't find an input interrupt endpoint
[86590.412220] usb 2-1.5.2: reset full-speed USB device number 12 using ehci_hcd
[86590.504736] usbhid 2-1.5.2:1.0: couldn't find an input interrupt endpoint
[86590.640223] usb 2-1.5.2: reset full-speed USB device number 12 using ehci_hcd
[86590.733200] usbhid 2-1.5.2:1.0: couldn't find an input interrupt endpoint
[86775.325056] usb 2-1.5.2: USB disconnect, device number 12

13:32 2012-03-30
GTD
1, today
1), 13:30-18:41 libvirt qemu driver reading. see"17:26 2012-03-28".
40' interrupted by other things. 

11:58 2012-3-31
company, SUSE, all hands meeting
ceph/rados
suse wins by quality, tools and integration.
\todo: suse manager, suse studio

2, suse lab:
THP: transparent hugeapges, alloc 2MB memory in userspace, useful for appliction which need large memory.
RT latency improvement. real time latency.
3), future:
(1), ksplice
(2), switchable preemption.
(3), kill HZ

3, other notes during this meeting:  
https://wiki.innerweb.novell.com/index.php/SUSE/Development/Lunch_and_Learn

Petr Cerny: what is our current positionn on SLE12 @ ARM?
Andreas Jaeger: Petr: Ask Vladimir Botka.
Andreas Jaeger: Petr: We'vee started evaluating what needs to be done excatly and whether it makes sense from a business side.

15:07 2012-03-31
GTD
1, today
1), libvirt libxl driver, pick a function to write. see"15:08 2012-03-31"
2), work report

15:08 2012-03-31
suse, virtualization, libvirt, qemu, xen, libvirt libxl driver, write a API
1, domainInterfaceStats, node Device management, domainOpenConsole.

16:48 2012-03-31
software, skill, network, wireless, try to connect company network
1, try to connect company wireless but i do not know how to setup it in "intel PROSet/Wireless. So, try to use the microsoft windows wireless management tools. 
Microsoft knowlede Base Article: 
Error message when you try to run the Wireless Network Setup Wizard after you update to Windows XP Service Pack 2, Service Pack 3 or Windows XP Tablet PC Edition 2005
http://support.microsoft.com/kb/871122
http://support.microsoft.com/kb/871122/zh-cn

2, install KB893357 patch for wpa2. still failed

3, (13:55 2012-04-01)
connect successful after install windowsXP sp3. 
but usb driver seems bad. only HID device is usable right now. 
try to buy a PCMCIA usb extion card. 

17:00 2012-03-31
work report - week 13
1, bamvor jian zhang work report
[devel-server] work report - week 13
[green]
1), learn libvirt qemu driver and libvirt xen driver. there are 57 functions not implement in libvirt libxl drvier in sles11 sp2(75 functions in libvirt upstream) compare libvirt qemu driver. i read almost all the missing functions in libvirt libxl driver. 
(1), some of these missing functions is implement through libvirt common functions in libvirt qemu driver, e.g. domainInterfaceStats, node Device management, domainOpenConsole. i plan to implement some of these functions to understand more about libvirt libxl driver. 

18:40 2012-03-31
GSoC
Hi, Sanidhya

congratulation!

do you try some command in libvirt virsh and xl or xm in xen? do you ever try to read some code in libvirt and xen?
it it very importtant for our project  fimiliar with the API and command in xen and libvirt.

bamvor


>>> Sanidhya Kashyap <sanidhya.iiith@gmail.com> 03/31/12 1:27 PM >>>
Hello Sir,

I have been able to run the unstable xen tools and xen stable version. I am playing with it. So, should I go ahead with the proposal?

Thanks,
Sanidhya

On Fri, Mar 30, 2012 at 8:14 AM, Sanidhya Kashyap <sanidhya.iiith@gmail.com> wrote:

    Hello Sir,

    That will be good. You can fix the time. I am free from UTC 4:00 to UTC 12:00.

    Thanks,
    Sanidhya

