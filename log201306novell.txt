.LOG
13:13 2013-06-03
GTD
0, 11:10

1, today
1), 30' xen arm: reply to upstream. see"17:39 2013-05-31"3
2), work report.

16:16 2013-06-03
1, 两个可能性
1), 其它cpu启动不正常.
2), 页表映射错误.

2, the other cpu will boot after make_cpus_ready set the gate to 1.

11:01 2013-06-04
company, colleague, L3 team, Aleš Novák
Petr Uzel <petr.uzel@suse.cz>
Dear colleagues,

It is my pleasure to welcome new employee, Aleš Novák. Aleš has
started today and thanks to his strong troubleshooting skills and
deep knowledge of the Linux platform he is a welcome reinforcement in
the L3 team. Aleš will focus on L3 bugfixing and coordination.

Please join me in welcoming Aleš and supporting him in his work.

Thanks,

	Petr

-- 
Petr Uzel
Team Lead SUSE L3 Team, Prague

11:02 2013-06-04
GTD
0, 11:00

1, today
1), 11:01- mail

11:05 2013-06-04
company, colleague, sle, Karol Mroz
Milisav Radmanic <radmanic@suse.com>
Hello,

I am very pleased to announce a new hire:
Karol Mroz has just started today and he is a strong addition to
the SUSE Linux Enterprise Applications team.

Karol has worked for CISCO in San Jose and started an own
software/service company. He brings a lot of expertise in writing
software for enterprise workloads, plus a great enthusiasm for SUSE
Linux. He will work from his home office in Vancouver (Canada).

please join me and welcome Karol

thank you
mili

-- 
Milisav Radmanic
Sr. Engineering Manager SUSE Linux Enterprise Applications
SUSE LINUX Products GmbH,
GF: Jeff Hawn, Jennifer Guild, Felix Imendörffer, HRB 16746 (AG Nürnberg)
Maxfeldstraße 5
90409 Nürnberg
Germany

11:16 2013-06-04
Olaf Kirch <okir@suse.com>
[devel] Announcing some role changes in the SLE Department
Dear SUSE,

I'm happy to announce several changes in the SLE Department, which will
become effective on July 1st - after we have shipped SLE11 SP3.

Thorsten Kukuk will take on the role of a Senior Architect for SLES
and our Common Code Base. In this role, he will be responsible for the
longer-term planning of SLES. In particular, Thorsten will coordinate
the overall development of SLE12.

Stefan Behlert will take over the role of Project Manager for SLES, taking
care of the day-to-day business of SLES, including the release management.

Frederic Crozat will assume the role of Project Manager for SLED, taking
care of anything related to the SLE Desktop.

Please join me for a moment in applauding the three of them for the
fantastic work they have done in their previous positions, and wish them
the best in their new roles.


Let me take advantage of this announcement to explain the new separation
of responsibilities around SLES a little, as it may be difficult to get
a clear picture from the terse description above. I know a few of you
will be scratching their heads, so let me try to illustrate this will
some examples.

 -	Anything related to specific features of the next SLES service
	pack, process questions, etc should go to Stefan as the Project
	Manager.

 -	Release planning, all the organization around Interlock, etc,
	will be done by Stefan.

 -	If you don't fix your SLES bugs in time, it will be Stefan who's
	knocking on your door. If you don't fix your SLED bugs, Frederic will
	use his good connections with the Foreign Legion...

 -	Conversations around the SLES and SLED Roadmaps should best include
	all three of them (Frederic, Stefan and Thorsten)

 -	Conceptual questions (What should the SDK look like in the future?
	What should our installer look like? What directory technologies
	should SLES support in the future? What do we do about
	benchmarking SLES?  Could we support SLES for 100 years?) should
	go to Thorsten as the Architect.
	Think of Thorsten as the R&D counterpart of the SLES Product Manager.

 -	For questions around longer-term planning (which Java version
	should we support in the future? How do we handle fast-evolving
	packages like PHP or Ruby on Rails?), Thorsten should be your
	primary contact.  The same goes for SLES features that span
	several service packs, or which involve significant effort
	(such as Swap over NFS).


Thanks for reading, and please support Frederic, Stefan and Thorsten in
their new assignments, so that we can all push SUSE Linux Enterprise to
new levels in the coming years!

Regards,
Olaf
-- 
Neo didn't bring down the Matrix. SOA did. (soafacts.com)
--------------------------------------------
Olaf Kirch - Director SUSE Linux Enterprise; R&D (okir@suse.com)
SUSE LINUX Products GmbH, Maxfeldstr. 5, 90409 Nürnberg, Germany
GF: Jeff Hawn, Jennifer Guild, Felix Imendörffer, HRB 16746 (AG Nürnberg) 

21:33 2013-06-04
virtualization, xen, arm, discuss with Andre Przywara
1, Andre Przywara <andre.przywara@calxeda.com> 20130603_1718, reply
> On 06/03/2013 09:29 AM, Bamvor Jian Zhang wrote:
>> "Andre Przywara <andre.przywara@calxeda.com>"> On 05/31/2013 02:53 PM, Bamvor Jian Zhang wrote:
>>> On 05/31/2013 02:53 PM, Bamvor Jian Zhang wrote:
>>>> These series patch enable Allwinner A31(code name sun6i) support in
>>>> assemble. with these patches, the cpu 0 of sun6i SOC could successful
>>>> boot into the c environment.
>>>
>>> Hi Bamvor,
>
> Hi Bamvor,
>
> thanks for the answer and the u-boot link.
>
>>> * Have you tried KVM on this?
>> No. which kernel version does KVM needed? currently, only 3.3 source is
>> available for A31.
>
> Are you sure? I see Allwinner A1X support being merged with 3.7-rc6.
yes, the sun4i(allwinner A10) is supported by upstream. but for sun6i and sun7i,
currently, only support android kernel v3.3 AFAIK.
> KVM needs v3.9, so you could just give the latest version a try.
> The patches in the repo you linked to seem to be for Android only, right?
> But in fact KVM currently only supports A15 cores, so A7 wouldn't work 
> out-of-the-box. The actual enablement of A7 doesn't seem to be 
> complicated, actually I would mostly suffice to just add the MIDR value 
> to the list of support CPUs (in arch/arm/kvm/guest.c:kvm_target_cpu())
i have check the code in https://github.com/virtualopensystems/linux-kvm-arm,
it seems that i only need to add Cortex-A7 in kvm_target_cpu()(arm.c) and add coproc_a7.c besides the sun6i own code. kvm will work, right?
i'd like to try it, after i get v3.9 kernel running.
>
>>> On the big.LITTLE TC-2 from ARM we got
>>> issues when trying to initialize KVM on the A7s, but couldn't get the
>>> real root cause yet. It hangs as soon as we write the HSCLTR.
>>> Have you found anything interesting differences between A15 and A7?
>> there are different implementation of cp15 for A15 and A7. but it is the
>> same definition for HSCLTR for writable bits. only diffferece is bit[21]
>> the value in CA15 is 1 while in CA7 is 0 although both document say that
>> FI(Fast Interrupt Configuration Enable Bit) is not implemented.
>
> Yeah, I saw this already, too. But as you mention that seems to be 
> bogus, as the specification isn't consistent in this regards.
> Also I tried both 0 and 1 here, it didn't make a difference.
>
>> BTW, i am hang in xen in setup_pagetables, it seems that it is crash after
>> flush the new page table. I was think that it it because the wrong memory
>> mapping. no sure whether it is same issue or not.
>
> The KVM crash happens as soon as we enable HSCLTR[0], which is the MMU.
> On A15 the same code works well.
> Currently I don't have time to debug this - and A7 isn't my particular 
> target anyway. But would be interesting to see what's wrong here.
>
> Thanks,
> Andre.
>
>> [1] http://git.rhombus-tech.net/?p=u-boot.git;a=tree;h=refs/heads/allwinner-sunxi-a31;hb=refs/heads/allwinner-sunxi-a31
>>
>> Thanks,
>> Bamvor
>>> Thanks,
>>> Andre.

2, 20130605_1708
> On 06/05/2013 04:39 AM, Bamvor Jian Zhang wrote:
>> Hi, Andre
>>
>>>>> "Andre Przywara <andre.przywara@calxeda.com>"> On 06/03/2013 09:29 AM, Bamvor Jian Zhang wrote:
>>> On 06/03/2013 09:29 AM, Bamvor Jian Zhang wrote:
>>>> "Andre Przywara <andre.przywara@calxeda.com>"> On 05/31/2013 02:53 PM, Bamvor Jian Zhang wrote:
>>>>> On 05/31/2013 02:53 PM, Bamvor Jian Zhang wrote:
>>>>>> These series patch enable Allwinner A31(code name sun6i) support in
>>>>>> assemble. with these patches, the cpu 0 of sun6i SOC could successful
>>>>>> boot into the c environment.
>>>>>
>>>>> Hi Bamvor,
>>>
>>> Hi Bamvor,
>>>
>>> thanks for the answer and the u-boot link.
>>>
>>>>> * Have you tried KVM on this?
>>>> No. which kernel version does KVM needed? currently, only 3.3 source is
>>>> available for A31.
>>>
>>> Are you sure? I see Allwinner A1X support being merged with 3.7-rc6.
>> yes, the sun4i(allwinner A10) is supported by upstream. but for sun6i and sun7i,
>> currently, only support android kernel v3.3 AFAIK.
>
> Ah, so it's only true for X=0 ;-)
>
>>> KVM needs v3.9, so you could just give the latest version a try.
>>> The patches in the repo you linked to seem to be for Android only, right?
>>> But in fact KVM currently only supports A15 cores, so A7 wouldn't work
>>> out-of-the-box. The actual enablement of A7 doesn't seem to be
>>> complicated, actually I would mostly suffice to just add the MIDR value
>>> to the list of support CPUs (in arch/arm/kvm/guest.c:kvm_target_cpu())
>> i have check the code in https://github.com/virtualopensystems/linux-kvm-arm,
>> it seems that i only need to add Cortex-A7 in kvm_target_cpu()(arm.c) and add coproc_a7.c besides the sun6i own code. kvm will work, right?
>
> Right, that's basically it. Though I fear there are some minor details 
> to fix.
> Please note that the mentioned repository is out-of-date, basically all 
> of it is now upstream. And some code locations have changed recently, so 
> kvm_target_cpu() has now moved into guest.c, for instance.
>
> Regards,
> Andre.
>
>> i'd like to try it, after i get v3.9 kernel running.
>>>
>>>>> On the big.LITTLE TC-2 from ARM we got
>>>>> issues when trying to initialize KVM on the A7s, but couldn't get the
>>>>> real root cause yet. It hangs as soon as we write the HSCLTR.
>>>>> Have you found anything interesting differences between A15 and A7?
>>>> there are different implementation of cp15 for A15 and A7. but it is the
>>>> same definition for HSCLTR for writable bits. only diffferece is bit[21]
>>>> the value in CA15 is 1 while in CA7 is 0 although both document say that
>>>> FI(Fast Interrupt Configuration Enable Bit) is not implemented.
>>>
>>> Yeah, I saw this already, too. But as you mention that seems to be
>>> bogus, as the specification isn't consistent in this regards.
>>> Also I tried both 0 and 1 here, it didn't make a difference.
>>>
>>>> BTW, i am hang in xen in setup_pagetables, it seems that it is crash after
>>>> flush the new page table. I was think that it it because the wrong memory
>>>> mapping. no sure whether it is same issue or not.
>>>
>>> The KVM crash happens as soon as we enable HSCLTR[0], which is the MMU.
>>> On A15 the same code works well.
>>> Currently I don't have time to debug this - and A7 isn't my particular
>>> target anyway. But would be interesting to see what's wrong here.
>>>
>>> Thanks,
>>> Andre.
>>>
>>>> [1] http://git.rhombus-tech.net/?p=u-boot.git;a=tree;h=refs/heads/allwinner-sunxi-a31;hb=refs/heads/allwinner-sunxi-a31
>>>>
>>>> Thanks,
>>>> Bamvor
>>>>> Thanks,
>>>>> Andre.
>>>>>
>>>>>> Bamvor Jian Zhang (4):
>>>>>>      xen/arm: introduce Cortex-A7 support
>>>>>>      xen/arm: introduce Allwinner sun6i SOC basic support
>>>>>>      xen/arm: enable early printk for sun6i
>>>>>>      xen/arm: enable switch to hyper mode for sun6i
>>>>>>
>>>>>>     xen/arch/arm/Rules.mk                 |  5 ++++
>>>>>>     xen/arch/arm/arm32/Makefile           |  1 +
>>>>>>     xen/arch/arm/arm32/debug-sun6i.inc    | 50 +++++++++++++++++++++++++++++++++++
>>>>>>     xen/arch/arm/arm32/head.S             | 11 ++++++++
>>>>>>     xen/arch/arm/arm32/mode_switch.S      | 13 +++++++--
>>>>>>     xen/arch/arm/arm32/proc-ca7.S         | 36 +++++++++++++++++++++++++
>>>>>>     xen/include/asm-arm/platforms/sun6i.h | 28 ++++++++++++++++++++
>>>>>>     xen/include/asm-arm/processor-ca7.h   | 25 ++++++++++++++++++
>>>>>>     8 files changed, 167 insertions(+), 2 deletions(-)
>>>>>>     create mode 100644 xen/arch/arm/arm32/debug-sun6i.inc
>>>>>>     create mode 100644 xen/arch/arm/arm32/proc-ca7.S
>>>>>>     create mode 100644 xen/include/asm-arm/platforms/sun6i.h
>>>>>>     create mode 100644 xen/include/asm-arm/processor-ca7.h
>>>>
>>>>
>>>
>>


10:40 2013-06-05
GTD
0, 9:30

1, today
1), continue to discuss with Andre. see"21:33 2013-06-04"

2), report the bug on vmware player.
3), debug the time segfault.
4), start port linux v3.9 to allwinner A31.

14:44 2013-06-05
arm, Cortex-A7, cache
L2 Control Register(L2CTLR).
1, get number of processor
2, whether the interrupt controller is present or not.

15:13 2013-06-05
arm, try fastmodel
1, . /home/bamvor/sda5_rd/home/bamvor/work_bak/arm/fast_model/FastModels_8-1-038_Linux_install/FastModelsTools_8.1/source_all.sh
2, fail on gcc 64bit. 
lots of undefined, because of the static library only support gcc4.1 and gcc 4.4
3, try ubuntu 12.04 for it.
how to install:
http://xlcwu.wordpress.com/2012/07/24/ubuntu-12-04-gcc-4-4/

17:04 2013-06-05
1, Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7fae414b1700 (LWP 15483)]    
0x00007fae48a13149 in virObjectIsClass (anyobj=0x33312f6e69616d6f, klass=0x7fae4981a9a0) at util/virobject.c:364                                                
364         return virClassIsDerivedFrom(obj->klass, klass);                    
(gdb) where                                                                     
#0  0x00007fae48a13149 in virObjectIsClass (anyobj=0x33312f6e69616d6f,
    klass=0x7fae4981a9a0) at util/virobject.c:364
#1  0x00007fae48a132a4 in virObjectLock (anyobj=0x33312f6e69616d6f)
    at util/virobject.c:316
#2  0x00007fae3b0e83da in libxlTimeoutModifyEventHook (priv=<optimized out>,
    hndp=0x7fae4981a9a0, abs_t=...) at libxl/libxl_driver.c:340
#3  0x00007fae3aeb5f65 in time_deregister (gc=0x7fae414b03e0,
    ev=0x7fae34056848) at libxl_event.c:294
#4  0x00007fae3aeb701a in afterpoll_internal (egc=0x7fae414b03e0,
    poller=<optimized out>, nfds=7, fds=0x7fae498251b0, now=...)
    at libxl_event.c:1021
#5  0x00007fae3aeb7b77 in eventloop_iteration (egc=0x7fae414b03e0,
    poller=0x7fae49884220) at libxl_event.c:1440
2, (17:00 2013-06-06)
debug the libvirt crash.
1), it might be priv is not valid in TimeoutModify.
but why? the timeout handle is register after its valid assigned.

19:24 2013-06-05
"Duncan Mac-Vicar P." <dmacvicar@suse.de> 20130605_1604
Hi!

It is my pleasure to announce Flavio Castelli[*] as a new member of the
SUSE Manager team,

Flavio works remotely from his hometown near Bergamo, Italy.

You know him very well from his work in the SUSE Studio team, where
since 2008 he has contributed to various fronts, from internal QA to the
development of complex servers and services that power Studio.

There will be a couple of weeks transitional period for his tasks in the
Studio team.

Please join me welcoming Flavio and support him in his new role.

[*] https://github.com/flavio

Thanks and Regards!

-- 
Duncan Mac-Vicar P. - http://www.suse.com/

SUSE LINUX Products GmbH, GF: Jeff Hawn, Jennifer Guild, Felix
Imendörffer, HRB 16746 (AG Nürnberg)
Maxfeldstraße 5, 90409 Nürnberg, Germany

14:40 2013-06-06
xen crash on vmware player.
Hi, Jim

i got a xen crash on vmware player.
after some testing, i found that it will crash after apply the Jan'patch(commit: fb034f42 "xmalloc: make close-to-PAGE_SIZE allocations more efficient"). from the crash log, i could not see the relationship between the patch and the crash. meanwhile xen start up successful on the physical machine and another physical machine, so, it also may be the bug in vmware player.
should i send it to xen community?
thanks.

here is the crash log:

(XEN) ACPI: LAPIC_NMI (acpi_id[0x24] high edge lint[0x1])
...    
(XEN) ACPI: LAPIC_NMI (acpi_id[0x3f] high edge lint[0x1])
(XEN) ACPI: IOAPIC (id[0x01] address[0xfec00000] gsi_base[0])
(XEN) ACPI: INT_SRC_OVR (bus 0 bus_irq 0 global_irq 2 high edge)
(XEN) ACPI: IRQ0 used by override.
(XEN) ACPI: IRQ2 used by override.
(XEN) Enabling APIC mode: Flat. Using 1 I/O APICs
(XEN) ACPI: HPET id: 0x8086af01 base: 0xfed00000
(XEN) Table is not found!
(XEN) Using APCI (MADT) for SMP configuration information
(XEN) SMP: Allowing 64 CPUs (62 hotplug CPUs)
(XEN) IRQ limits: 24 GSI, 376 MSI/MSI-X
(XEN) Not enabling x2APIC: depends on iommu_supports_eim.
(XEN) Using scheduler: SMP Credit Scheduler (credit)
(XEN) Detected 3392.196 MHz processor.
(XEN) Initing memory sharing.
(XEN) xstate_init: using cntxt_size: 0x340 and states: 0x7
(XEN) ----[ Xen-4.3-0  x86_64  debug=n  Not tainted ]----
(XEN) CPU:    0
(XEN) RIP:    e008:[<ffff82c4c01a9d5d>] mcheck_init+0x21d/0x370
(XEN) RFLAGS: 000000000010087   CONTEXT: hypervisor
(XEN) rax: ffff8300bfff03d0   rbx: ffff8300bfff03f0   rcx: 0000000000000000
(XEN) rdx: 0000000000000000   rsi: bad0bad0bad0bad0   rdi: bad0bad0bad0bad0
(XEN) rbp: ffff82c4c0256380   rsp: ffff82c4c02b7d98   r8:  ffff8300bfaf5be0
(XEN) r9:  0000000000000310   r10: 0000000000000040   r11: 0100000000000000
(XEN) r12: 0000000000000001   r13: 0000000000000001   r11: 0000000000000002
(XEN) r15: ffff82c4c02564e0   cr0: 000000000005003b   cr4: 00000000000400f0
(XEN) cr3: 00000000bfc65000   cr2: 0000000000000000
(XEN) ds: 0000   es: 0000   fs: 0000   gs: 0000   ss: 0000   cs: e008
(XEN) xen stack strace from rsp=ffff82c4c02b7d98:
...
(XEN) Xen call trace:
(XEN) [<ffff82c4c01a9d5d>] mcheck_init+0x21d/0x370
(XEN) [<ffff82c4c01a5baf>] identify_cpu+0x2bf/0x2d0
(XEN) [<ffff82c4c0290447>] __start_xen+0x3407/0x3e70
(XEN) [<ffff82c4c026f2a8>] e820nr+0/0x4
(XEN) [<ffff82c4c01000b5>] __high_start+0xa1/0xa3
(XEN)
(XEN)
(XEN) **************************************
(XEN) Panic on CPU 0:
(XEN) GENERAL PROTECTION FAULT
(XEN) [error_code=0000]
(XEN) **************************************
(XEN)
(XEN) Reboot in five seconds...

08:08 2013-06-07
locking.
https://www.redhat.com/archives/libvir-list/2013-May/msg01247.html

