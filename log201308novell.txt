.LOG
10:12 2013-8-1
mailing list, virtualization, xen-devel; software skill, systemd
Configuring systemd to restart libvirtd on failure
Mooli Tayer
This will create a respawn behaviour in case libvirt process exits due to nonzero exit code, is terminated by a signal, an operation times out or the configured watchdog timeout is triggered. see http://www.freedesktop.org/software/systemd/man/systemd.service.html ---daemon/libvirtd.service.in | 1 + 1 file changed, 1 insertion(+)

diff --git a/daemon/libvirtd.service.in b/daemon/libvirtd.service.in index aa5913b..25979ef 100644 --- a/daemon/libvirtd.service.in +++ b/daemon/libvirtd.service.in @@ -15,6 +15,7 @@ EnvironmentFile=-/etc/sysconfig/libvirtd ExecStart=@sbindir@/libvirtd $LIBVIRTD_ARGS ExecReload=/bin/kill -HUP $MAINPID KillMode=process +Restart=on-failure # Override the maximum number of opened files #LimitNOFILE=2048

12:49 2013-08-01
GTD
0, 11:30

1, today
1), try to update os-prober script in order to support xen in other os.

11:11 2013-08-05
GTD
0, 10:40-11:40 12:20-13:45 16:30-18:20 18:42-21:10

1, today
1), mail.
2), 18:47-21:10 try exclusive operation in linux for sun6i. see"18:47 2013-08-05"

11:12 2013-08-05
company, colleague, openSUSE team, Antonio Larrosa Jiménez
"Agustin Benito Bethencourt <abebe@suse.com>"_email_"[devel] new openSUSE Team member: Antonio Larrosa"_20130802_1721
Hi,

I am happy to announce that Antonio Larrosa Jiménez joined yesterday the 
openSUSE Team at SUSE. He will work remotely from Spain.  He is not new at 
SUSE since he worked here for a year back in 2000.

Antonio is a KDE developer. Those of you who contributed to that project years 
ago will certainly know him. He will replace Will Stephenson as the KDE L3 
maintainer.

Antonio has been working the last 10 years in a company called Tedial that 
develop a real time backup system for multimedia-tv companies. The last years 
he also teached OS at Malaga College for IT students. 

Until August 9th he is in our offices in Nuremberg.

Welcome back Antonio.

Saludos
-- 
Agustin Benito Bethencourt
openSUSE Team Lead at SUSE
abebe@suse.com

11:13 2013-08-05
company, colleague, virtualization, Mike Latimer
"Jason Douglas <jdouglas@suse.com>"_email_"[devel] New Colleague in Virtualization Team -- Mike Latimer"
It is my pleasure to announce that Mike Latimer is the newest member of 
the Virtualization Team within the SLE Department. Mike lives in Utah 
and will join the SUSE team on the 5th floor in Provo.

Many of you might know Mike from NTS where he has spent nearly 20 years 
doing backline support on various products. We are confident that his 
experience will be a great asset to the team, and will allow him to hit 
the ground running as he transitions to development work around Xen and 
KVM.

Please join me in welcoming Mike to this new position.

Thanks!
Jason Douglas

12:28 2013-08-05
qemu, qcow2, qed
1, qed is Qemu Enhanced Disk
http://wiki.qemu.org/Features/QED
http://www.phoronix.com/scan.php?page=news_item&px=OTY0MQ

2, performance compare with qcow2, qed, QED with L2 Flush
http://wiki.qemu.org/Qcow2/PerformanceRoadmap

3, mount qcow2 through qemu-nbd
http://blog.loftninjas.org/2008/10/27/mounting-kvm-qcow2-qemu-disk-images/

18:00 2013-08-05
software skill, virtualization, qemu, qcow2, snapshot
【转】QCOW增量虚拟机制作
http://hi.baidu.com/chenshake/item/6b2a6327fa4ab7d6a517b6dd
kvm环境快照（snapshot）的使用方法
http://blog.csdn.net/gg296231363/article/details/6899533

18:06 2013-08-05
blog, virtualization, cloud
http://www.cnblogs.com/feisky/

18:08 2013-08-05
GTD, week review, week plan
1, week review
1), get console patch commit. WAITING OTHERS COMMENTS -> commit DONE
2), try ao_how: at least work when callback == NULL.  ref"11:00 2013-07-23"3.
THIS IS IMPORTANT. no progress.
3), try exclusive operation on sun6i. try sun6i upstream kernel. CANCEL
4), try rbd on libvirt libxl. 
(1), MINOR: report in week 30. CANCEL
(2), enable rbd cache? i am not sure whether it need or not. NEED. it is ok in current code.
(3), found chance to enhance xenlight rbd support. see"10:27 2013-07-29"5. CANCEL.
5), opensuse arm bug test and report. CANCEL
(1), ask help for run opensuse arm on cubie.
(2), arndale x11 not start. TRY AGAIN IN NEXT WEEK.

2, week plan
1), try exclusive operation on sun6i. try sun6i upstream kernel.
i wait it in two weeks. must do it this week.
2), try ao_how.
3), sr kvm patch to bruce with him suggestion.

18:47 2013-08-05
xen, arm, sun6i
1, try kernel 3.4 when could the ldrex/strex use?
2, bad crc
sunxi#fatload mmc 0:2 43000000 script.bin
reading script.bin

41068 bytes read
sunxi#fatload mmc 0:2 48000000 linux/uImage
reading linux/uImage

3464192 bytes read
sunxi#setenv bootargs "console=ttyS0,115200 root=/dev/mmcblk0p3 init=/init loglevel=8"
sunxi#bootm 48000000
## Booting kernel from Legacy Image at 48000000 ...
   Image Name:   Linux-3.3.0
   Image Type:   ARM Linux Kernel Image (uncompressed)
   Data Size:    3464128 Bytes = 3.3 MiB
   Load Address: 40008000
   Entry Point:  40008000
   Verifying Checksum ... Bad Data CRC
ERROR: can't get kernel image!
sunxi#

the actual kernel size: 
> ll arch/arm/boot/uImage
-rw-r--r-- 1 bamvor users 3464192 Aug  5 19:37 arch/arm/boot/uImage

install mkimage and rebuild the kernel(clean first).

3, modify gic according to Maxime Ripard patch
1), 
gic: interrupt-controller@01c81000 {
        compatible = "arm,cortex-a7-gic";
        reg = <0x01c81000 0x1000>,
              <0x01c82000 0x1000>,
              <0x01c84000 0x2000>,
              <0x01c86000 0x2000>;
        interrupt-controller;
        #interrupt-cells = <3>;
        interrupts = <1 9 0xf04>;
};

2), uart0
uart0: serial@01c28000 {
        compatible = "snps,dw-apb-uart";
        reg = <0x01c28000 0x400>;
        interrupts = <0 0 1>;
        reg-shift = <2>;
        reg-io-width = <4>;
        clocks = <&osc>;
        status = "disabled";
};

the following line is important:
        interrupts = <0 0 1>;
it will be pass after changing this.

4, \TODO fix this
(XEN) WARNING: Unrecognized/unsupported device tree compatible list
(XEN) Available platform support:
(XEN)     - VERSATILE EXPRESS
(XEN)     - SAMSUNG EXYNOS5

5, hang after local_irq_enable().
start_xen<509>
start_xen<511>
start_xen<514>
start_xen<517>
(XEN) Using scheduler: SMP Credit Scheduler (credit)
start_xen<520>
start_xen<523>
start_xen<526>
\TODO: which irq will araise after local_irq_enable()? 

6, \TODO: make sure console init ok.

10:45 2013-08-06
GTD
0, 10:40-11:40 15:40-18:10

1, today
1), mail.
2), 13:40-15:40. nap.
3), 15:40-17:30 ao_how. why event not return. see"15:42 2013-08-06"
4), xen: arm. add cpu in dts. add platform support for sun6i in xen.
ask linux-sunxi about u-boot.

10:51 2013-08-06
company, colleague, SLE Core Team, Pawel Wieczorkiewicz
"Stefan Fent <sf@suse.de>"_email_"[devel] Please welcome new memeber of the SLE Core Team Pawel Wieczorkiewicz"_20130805_2200
Hi,

I am very pleased to announce a new member of the SLE Core Team, Pawel 
Wieczorkiewicz.
Pawel has started working for SUSE on August 1st, coming from Intel working on 
networking  / wireless technologies. 
He lives in Nürnberg, and therefore can be found in office 2.3.21.

Please join me and welcome Pawel.

Regards,

Stefan
-- 
SUSE LINUX Products GmbH GF: Jeff Hawn, Jennifer Guild, Felix Imendörffer, HRB 
16746 (AG Nürnberg) 
Maxfeldstr. 5 / D-90409 Nürnberg / Phone: +49-911-740 53 - 0  
GPG 1024D/91614BBC B226 E3DA 37B0 2170 7403  D19C 18AF E579 9161 4BBC

15:42 2013-08-06
virtualization, xen, libxl, async, try ao_how, cont2, debug save, cont2
1, plan 
1), why the first time call libxl__ao_complete_check_progress_reports not report the complete. i need this.

2, 
helper_exited
helper_done
libxl__domain_suspend_device_model

3, i think i should add the libxl__fork_selfpipe_woken things to libxl_osevent_hooks.
because it is the only thing missing in libvirt but inplement in afterpoll_internal.

    int selfpipe = libxl__fork_selfpipe_active(CTX);
    if (selfpipe >= 0 &&
        afterpoll_check_fd(poller,fds,nfds, selfpipe, POLLIN)) {
        int e = libxl__self_pipe_eatall(selfpipe);
        if (e) LIBXL__EVENT_DISASTER(egc, "read sigchld pipe", e, 0);
        libxl__fork_selfpipe_woken(egc);
    }

