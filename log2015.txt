.LOG
09:03 2015-01-01
张蕾:
后台OpenERP, 前台app开发，电子商务用.

bamvor:
昨天大致看了看。不太清楚你老公想了解啥。软件方面看看能不能帮上忙：
服务器搭建，维护方式的选择。
软件使用风险。社区成熟程度。
开源对商业应用的风险。
app开发的难易程度。
。。。

08:52 2015-1-3
software skill, SCM, git
dirstat
git diff --dirstat=0.2 v3.18..for-next

Top 20 contributors by patch count (no merges):

$ git log --format=%an --no-merges v3.18..for-next  | sort | uniq -c  |sort -nr | head -n 20
56 Geert Uytterhoeven
48 Maxime Ripard

9:08 2015-1-3
linaro, kernel, arm, arm64
[arm-soc contents merged into 3.19](http://www.linaro.org/blog/core-dump/arm-soc-contents-merged-3-19/)
By Arnd Bergmann Posted December 23, 2014  In Core Dump
ARM: SoC/iommu configuration for 3.19
Commit 6f51ee709e4c

09:17 2015-1-3
community, lwn, arm64
The device mapper "thin provisioning" target has seen some significant performance improvements, mostly having to do with aggregating I/O operations to the same block before issuing them to the underlying device. 


The iommu-config branch contains work from Will Deacon, quoting his description:

“This series adds automatic IOMMU and DMA-mapping configuration for OF-based DMA masters described using the generic IOMMU devicetree bindings. Although there is plenty of future work around splitting up iommu_ops, adding default IOMMU domains and sorting out automatic IOMMU group creation for the platform_bus, this is already useful enough for people to port over their IOMMU drivers and start using the new probing infrastructure (indeed, Marek has patches queued for the Exynos IOMMU)”.

19:00 2014-1-3
年度计划
1, 工作
1), ilp32落地和容器软硬件协同。
2), 提高工作效率。
(1), 高效及时获得社区邮件：
更好的利用kindle看邮件。
一定要自己做么？

2, 家庭

19:19 2015-1-5
diy, hardware, arm, linux
1, 反思：rk3288这个平板买的着急了，当时没想清楚能做什么。现在如果买nexus 9，肯定暂时就不考虑linaro的板了。
要评估几方面：
1), 刷linux是否容易，是否需要大量硬件工作。
目前看nexus需要自己做一根串口线。技术上应该可以实现。
(19:22 2015-1-13)
目前考虑rk3288平板 chroot到arm64看看行不行。

19:24 2015-1-13
目前的工作日志需要提炼，要考虑写文档。原来做ilp32时的很多想法都忘了。

08:24 2015-1-20
filesystem, btrfs, lvm, iSCSI
1, https://www.mail-archive.com/linux-btrfs@vger.kernel.org/msg02298.html
> >> However, with btrfs, I'm not sure about:
> >>
> >> - what happens if SAN machine crashes while the iSCSI file images were 
> >> being written to; with LVM and its block devices, I'm somehow more 
> >> confident it wouldn't make more data loss than necessary
> > 
> > If iscsi is writing with O_DIRECT|O_SYNC it should work.
> 
> What if it doesn't?
> 

Writes would go to the page cache only (not O_DIRECT) and the metadata
wouldn't get flushed with each write (not O_SYNC).

-chris

8:57 2015-01-21
distribution, fedora, fedora 23; arm64; wayland
fedora23变化很大啊，计划只支持64位架构（包括arm64）[1]，使用wayland代替X做为默认显示服务[2]。 
wayland介绍[3]：
Wayland的“直接渲染架构”彻底结束了传统X Window在渲染图形时需要不停的向Server请求、确认再绘制这个繁琐的过程，理论上响应速度有了“爆发式”增长；
Wayland从根本上消除了“Server+Compositor”的重复劳动，仅有且只需要有一个“Compositor”合成器而已。

[1] http://www.phoronix.com/scan.php?page=news_item&px=Fedora-23-64-bit-Proposal
[2] http://www.phoronix.com/scan.php?page=news_item&px=Fedora-Workstation-22-Features
[3] http://imtx.me/archives/1574.html

08:55 2015-01-22
系统调用时间
系统cpu 3G
开了selinux, auditing: 75ns / 0.33
off 42ns / 0.33
也就是说在这个架构的系统调用时间是126cycle, 225cycle。

08:54 2015-01-23
set -g set-titles-string   '#W#F             #T'

14:01 2015-01-30
markdown, format
日期用一级标题：=========，这样自动生成文档时直接去掉日期加总标题。
关键字和题目用二级标题：--------------，将来的工搜索工具可以按标题级别搜索。

09:34 2015-01-31
Virtualbox已经两年没新版本，据说oracle内部只有四个人在做。和kvm相比唯一的优势可能是openGL.


09:42 2015-02-07
software skill, tmux
多电脑登录时如何修改X显示在哪个屏幕？
原来我是在希望显示的屏幕重新ssh -X。今天想到可以修改DISPLAY. 例如当前windows ssh的DISPLAY是localhost:10.0，本地DISPLAY是“:0”

14:35 2015-02-07
vim
开始用strlen发现unicode长度和显示长度不同。
from stackoverflow 5054128.
function! s:LogAssistant_insertSharp
let loc = line('.') - 1
let len = strdisplaywidth(getline(loc))
exe ":normal a" . repeat('-', len)
endfunction

20:44 2015-03-14
software skill, rpm, queryformat
> rpm -q --qf "%{disturl}\n" gcc48
obs://build.opensuse.org/openSUSE:13.2/standard/6d3710092c7fe8023ebfd4f6a9d03462-gcc48

17:14 2015-04-15
software, skill, vpn, NetworkManager
1.  之前用NetworkManager配置PPTP vpn总是不行，今天android手机上配置对比了下，是没有选择MPPE加密造成的。

17:16 2015-04-16
software skill, SCM, git, diff, MS office, ppt, pptx; libreoffice, odp, fodp
1.  现有基本是两个方案， 一个是利用MS自带的diff/merge工具; 一个是利用pptx和odp的特点，直接解包diff. 后一种方法是可以的, 但是我只能得到zip包文件变更, 没有得到具体文件的差异, 应该还是参数用的不对.
<http://xcafebabe.blogspot.mx/2012/09/sexy-comparison-of-word-documents-with.html>
<https://gist.github.com/shuhei/504b5abdd8c27363d02f>
<https://code.google.com/p/tortoisegit/source/browse/contrib/diff-scripts/diff-ppt.js?r=f1639d27e22169c24d23fc89f4d9d678f096f6e9>

MS自带的merge工具, 从2007开始就没有了. 所以只有解包这一条路, 如果不希望解包, 也可以转为fodp, 就是直接用一个XML格式而不是zip包的多个XML.
2.  结论: git保存ms office和libreoffice并没有我原来想象的保存二进制文件那样查的感觉, 后续如果遇到需要保存这类文档, 也是可以考虑的.

16:55 2015-04-18
zypper 1.9.3-1.1
两次Ctrl+C

qemu-system-aarch64 -machine virt -cpu cortex-a57 --nographic -m 1024 -smp 1 --kernel /home/bamvor/works/source/kernel/linux/arch/arm64/boot/Image --append "console=ttyAMA0 root=/dev/vda2 rw" --drive if=none,file=/home/bamvor/works/software/opensuse/openSUSE-13.1-ARM-JeOS-vexpress64.aarch64-1.12.1-Build37.15.raw,id=fs -device virtio-blk-device,drive=fs -net user -netdev user,id=net0,net=192.168.76.0/24,dhcpstart=192.168.76.9 -device virtio-net-device,netdev=net0 -s

15:40 2015-05-06
software skill, distribution, security, signature
1.  how does opensuse sign the package
    https://en.opensuse.org/openSUSE:Build_Service_Signer
    1.  opensuse repoinfo
        https://en.opensuse.org/openSUSE:Standards_RepoInfo
    2.  example
        wget http://download.opensuse.org/repositories/home:/bamvor:/branches:/devel:/gcc/openSUSE_13.2/home:bamvor:branches:devel:gcc.repo

        [home_bamvor_branches_devel_gcc]
        name=Branch project for package gcc48 (openSUSE_13.2)
        type=rpm-md
        baseurl=http://download.opensuse.org/repositories/home:/bamvor:/branches:/devel:/gcc/openSUSE_13.2/
        gpgcheck=1
        gpgkey=http://download.opensuse.org/repositories/home:/bamvor:/branches:/devel:/gcc/openSUSE_13.2/repodata/repomd.xml.key
        enabled=1

        wget http://download.opensuse.org/repositories/home:/bamvor:/branches:/devel:/gcc/openSUSE_13.2/repodata/repomd.xml.key

        cat repomd.xml.key
-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v2.0.15 (GNU/Linux)

mQENBFP+0PQBCADMmjsf73yU0Yqufp+6o8lZAzRqmNcmHhQW6fWoBUa7xEWNf6q7
B93FrS0/+YbKsUu2j+XZlVqBmop53rlIGJ4OGCCpFqvcw6DtvFMCzMM6F39nkhQE
avzJ/p5UUei4PwGIgRSafLh3FLIF6X2bAlFFAbA2re97NAfo6/VM2N6znd/IdYSM
xNrux86ksqYJE0aDBRve2QsUvbD6FElqbC59rreSzKGIlK1n8jzqEAPEKosL2tgS
596CsWYvYYMdKbQ2l5IyQVZSq1n3wFxqjEU9KRh1nGQ5vOZ1RoFAXz+MRKKCIp55
tO6avkbzpEsB+OmCXDQyyxmKKKWN470aG6ptABEBAAG0OGhvbWU6YmFtdm9yIE9C
UyBQcm9qZWN0IDxob21lOmJhbXZvckBidWlsZC5vcGVuc3VzZS5vcmc+iQE+BBMB
AgAoBQJT/tD0AhsDBQkEHrAABgsJCAcDAgYVCAIJCgsEFgIDAQIeAQIXgAAKCRCe
5yr0Ki1RRDvPCACEjSAyMtW/jkEJbGsmdHgGQTBhHp2bVa6jNfvbYrl2pYJrjTAR
XmIdqVldpKueCdNi9Of5ux/YJto3jE+XZSKslM/e1Mv7oK2TTr48nSV66xfXsula
u450lTYyyDaOp2oqiC+m1DTamB9Q6KHdK19KtXCsk+Gebl9WYaAgjPEmfjjBViRU
K2aNV6Ocx/iv6eIQw3PXRrPh/lItuquu8LkT2X/OolcdL/jniGyQXdb91WDk1qe3
Dc56HlGRtpZ7TwT+a1TTqFakHMbYpD85MMHWv+O1OQXrvb5kEyQoG5A0ZUxt4VUb
lx5cv+QVUxLnOk1TMMsLrq7g3QzXS/UO2HXviEYEExECAAYFAlP+0PQACgkQOzAR
t2udZSOrngCeLGgioiB4e7S9opDPBRMhiuE0sZEAoItLKEaj8miOnibR6OiDTPrL
zDj/
=ENjo
-----END PGP PUBLIC KEY BLOCK-----

2.  iso
    https://tr.opensuse.org/SDB:Check_the_validity_of_a_SUSE_RPM_or_ISO_file
3.  install
    https://en.opensuse.org/SDB:Secure_installation_sources
4.  http://unix.stackexchange.com/questions/132836/where-does-zypper-install-the-repository-or-package-signing-keys 

14:50 2015-05-14
  84     68  sysdeps/unix/sysv/linux/mq_notify.c <<GLOBAL>>
             static pthread_barrier_t notify_barrier;
  87     26  nptl/pthread_barrier_destroy.c <<pthread_barrier_destroy>>
             pthread_barrier_t *barrier;
  88     33  nptl/pthread_barrier_init.c <<pthread_barrier_init>>
             pthread_barrier_t *barrier;
  89     28  nptl/pthread_barrier_wait.c <<pthread_barrier_wait>>
             pthread_barrier_t *barrier;
 115   1070  sysdeps/nptl/pthread.h <<pthread_barrier_init>>
             extern int pthread_barrier_init (pthread_barrier_t *__restrict __barrier,
 116   1076  sysdeps/nptl/pthread.h <<pthread_barrier_destroy>>
             extern int pthread_barrier_destroy (pthread_barrier_t *__barrier)
 117   1080  sysdeps/nptl/pthread.h <<pthread_barrier_wait>>
             extern int pthread_barrier_wait (pthread_barrier_t *__barrier)
2.  sysdeps/nptl/internaltypes.h
/* Barrier data structure.  */
struct pthread_barrier
{
  unsigned int curr_event;
  int lock;
  unsigned int left;
  unsigned int init_count;
  int private;
};
从这个数据结构看，pthread的barrier是通过内核futex实现的。

15:44 2015-05-14
software skill, mail client, thunderbird, gmail imap slow
1.  <http://superuser.com/questions/437117/thunderbird-very-slow-with-gmail>
>   unsubscribe the "All Mail" folder for each gmail account. if subscribed you are doubling the download size
2.  <http://www.ghacks.net/2013/09/07/fix-gmail-imap-slows-thunderbird-mails-arriving-timely-fashion/>
    set mail.server.default.use_condstore to false.
3.  other reference:
    <http://kb.mozillazine.org/Performance_(Thunderbird)>

18:46 2015-05-14
fedora, aarch64, qemu
https://fedoraproject.org/wiki/Architectures/AArch64/Install_with_QEMU
1.  https://www.kraxel.org/repos/jenkins/edk2/edk2.git-aarch64-0-20150512.b1001.g30cfc3d.noarch.rpm

11:43 2015-05-15
software skill, systemd, service
1.  man systemd.service
2.  ExecStop, ExecStopPost
3.  systemd的命令必须是绝对目录，同时不能直接用shell内建命令。
4.  systemd中命令的log可以通过"systemctl status your.service"查看。
    如果命令本身没有log, 似乎也没地方查命令是否执行.

